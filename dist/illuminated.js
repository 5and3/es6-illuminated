!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i():"function"==typeof define&&define.amd?define(i):i()}(0,function(){"use strict";var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")},s=function(){function n(t,i){for(var o=0;o<i.length;o++){var n=i[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,i,o){return i&&n(t.prototype,i),o&&n(t,o),t}}(),i=function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)},a=function(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i},w=function(){function o(t,i){e(this,o),this.x=t||0,this.y=i||0}return s(o,[{key:"copy",value:function(){return new o(this.x,this.y)}},{key:"dot",value:function(t){return t.x*this.x+t.y*this.y}},{key:"sub",value:function(t){return new o(this.x-t.x,this.y-t.y)}},{key:"add",value:function(t){return new o(this.x+t.x,this.y+t.y)}},{key:"mul",value:function(t){return new o(this.x*t,this.y*t)}},{key:"inv",value:function(){return this.mul(-1)}},{key:"dist2",value:function(t){var i=this.x-t.x,o=this.y-t.y;return i*i+o*o}},{key:"normalize",value:function(){var t=Math.sqrt(this.length2());return new o(this.x/t,this.y/t)}},{key:"length2",value:function(t){return this.x*this.x+this.y*this.y}},{key:"toString",value:function(){return this.x+","+this.y}},{key:"inBound",value:function(t,i){return t.x<this.x&&this.x<i.x&&t.y<this.y&&this.y<i.y}}]),o}(),o=(Math.PI,Math.sqrt(5),2*Math.PI);function v(t,i,o){var n=i[0];t.moveTo(n.x,n.y);for(var e=1,s=i.length;e<s;++e)n=i[e],t.lineTo(n.x,n.y);!o&&2<i.length&&(n=i[0],t.lineTo(n.x,n.y))}function r(t,i,o){var n,e="illujs_"+t;null===(n=document.getElementById(e))&&((n=document.createElement("canvas")).id=e,n.width=i,n.height=o,n.style.display="none",document.body.appendChild(n));var s=n.getContext("2d");return s.clearRect(0,0,n.width,n.height),n.width=i,n.height=o,{canvas:n,ctx:s,w:i,h:o}}var h=function(){var t=document.createElement("canvas");t.width=t.height=1;var n=t.getContext("2d");return function(t,i){n.clearRect(0,0,1,1),n.fillStyle=t,n.fillRect(0,0,1,1);var o=n.getImageData(0,0,1,1).data;return"rgba("+[o[0],o[1],o[2],i]+")"}}();function k(t,i){var o,n,e,s,a=k.epsilon||1e-6,r=[],h=t;"object"===(void 0===h?"undefined":x(h))&&"number"==typeof i&&(i=i=h);"number"==typeof i?e=(o=i)*o+(n=arguments[2])*n:(o=i.x,n=i.y,e=i.length2());var c=n*Math.sqrt(e-h*h),u=Math.acos((-h*o+c)/e),p=Math.acos((-h*o-c)/e),l=h*Math.cos(u),f=h*Math.sin(u),y=h*Math.cos(p),d=h*Math.sin(p);s=new w(o+y,n+d),r.push(s);var v=s.length2();s=new w(o+l,n-f),r.push(s);var g=s.length2();if(Math.abs(v-g)<a)return r;s=new w(o+y,n-d),r.push(s);var b=s.length2();if(Math.abs(g-b)<a)return[s,r[1]];if(Math.abs(v-b)<a)return[r[0],s];s=new w(o+l,n+f),r.push(s);var m=s.length2();return Math.abs(b-m)<a?[r[2],s]:Math.abs(g-m)<a?[r[1],s]:Math.abs(v-m)<a?[r[0],s]:r}var n=function(){function o(t){e(this,o);var i={position:new w,distance:100,diffuse:.8};this.options=Object.assign(i,t)}return s(o,[{key:"render",value:function(t){}},{key:"mask",value:function(t){var i=this._getVisibleMaskCache();t.drawImage(i.canvas,Math.round(this.options.position.x-i.w/2),Math.round(this.options.position.y-i.h/2))}},{key:"bounds",value:function(){return{topleft:new w(this.options.position.x-this.options.distance,this.options.position.y-this.options.distance),bottomright:new w(this.options.position.x+this.options.distance,this.options.position.y+this.options.distance)}}},{key:"center",value:function(){return new w(this.options.distance,this.options.distance)}},{key:"forEachSample",value:function(t){t(this.options.position)}},{key:"_getVisibleMaskCache",value:function(){var t=Math.floor(1.4*this.options.distance),i=""+t;if(this.vismaskhash!=i){this.vismaskhash=i;var o=this._vismaskcache=createCanvasAnd2dContext("vm"+this.id,2*t,2*t),n=o.ctx.createRadialGradient(t,t,0,t,t,t);n.addColorStop(0,"rgba(0,0,0,1)"),n.addColorStop(1,"rgba(0,0,0,0)"),o.ctx.fillStyle=n,o.ctx.fillRect(0,0,o.w,o.h)}return this._vismaskcache}},{key:"_getHashCache",value:function(){return[this.options.distance,this.options.diffuse].toString()}}]),o}(),t=function(){function o(t){e(this,o);var i={light:new n,objects:[]};this.options=Object.assign(i,this.options),this.options=Object.assign(this.options,t)}return s(o,[{key:"createCache",value:function(t,i){this._cache=r("lc",t,i),this._castcache=r("lcc",t,i)}},{key:"cast",value:function(t){var o=this.options.light,i=o.samples,n=this._castcache,e=n.ctx;e.clearRect(0,0,n.w,n.h),e.fillStyle="rgba(0,0,0,"+Math.round(100/i)/100+")";var s=o.bounds(),a=this.options.objects;o.forEachSample(function(i){for(var t=0,o=a.length;t<o;++t)if(a[t].contains(i))return void e.fillRect(s.topleft.x,s.topleft.y,s.bottomright.x-s.topleft.x,s.bottomright.y-s.topleft.y);a.forEach(function(t){t.cast(e,i,s)})}),a.forEach(function(t){var i=void 0===t.diffuse?.8:t.diffuse;i*=o.diffuse,e.fillStyle="rgba(0,0,0,"+(1-i)+")",e.beginPath(),t.path(e),e.fill()}),t.drawImage(n.canvas,0,0)}},{key:"compute",value:function(t,i){this._cache&&this._cache.w==t&&this._cache.h==i||this.createCache(t,i);var o=this._cache.ctx,n=this.options.light;o.save(),o.clearRect(0,0,o.canvas.width,o.canvas.height),n.render(o),o.globalCompositeOperation="destination-out",this.cast(o),o.restore()}},{key:"render",value:function(t){t.drawImage(this._cache.canvas,0,0)}},{key:"getCanvas",value:function(){return this._cache.canvas}}]),o}(),c=function(t){function o(t){e(this,o);var i=a(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return i.options=Object.assign({id:0,color:"rgba(250,220,150,0.8)",radius:0,samples:1,angle:0,roughness:0},i.options),i.options=Object.assign(i.options,t),i}return i(o,n),s(o,[{key:"_getHashCache",value:function(){return[this.options.color,this.options.distance,this.options.diffuse,this.options.angle,this.options.roughness,this.options.samples,this.options.radius].toString()}},{key:"center",value:function(){return new w((1-Math.cos(this.options.angle)*this.options.roughness)*this.options.distance,(1+Math.sin(this.options.angle)*this.options.roughness)*this.options.distance)}},{key:"bounds",value:function(){var t=new w(Math.cos(this.options.angle),-Math.sin(this.options.angle)).mul(this.options.roughness*this.options.distance);return{topleft:new w(this.options.position.x+t.x-this.options.distance,this.options.position.y+t.y-this.options.distance),bottomright:new w(this.options.position.x+t.x+this.options.distance,this.options.position.y+t.y+this.options.distance)}}},{key:"mask",value:function(t){var i=this._getVisibleMaskCache(),o=new w(Math.cos(this.options.angle),-Math.sin(this.options.angle)).mul(this.options.roughness*this.options.distance);t.drawImage(i.canvas,Math.round(this.options.position.x+o.x-i.w/2),Math.round(this.options.position.y+o.y-i.h/2))}},{key:"_getGradientCache",value:function(t){var i=this._getHashCache();if(this._cacheHashcode==i)return this._gcache;this._cacheHashcode=i;var o=Math.round(this.options.distance),n=2*o,e=r("gc"+this.id,n,n),s=e.ctx.createRadialGradient(t.x,t.y,0,o,o,o);return s.addColorStop(Math.min(1,this.options.radius/this.options.distance),this.options.color),s.addColorStop(1,h(this.options.color,0)),e.ctx.fillStyle=s,e.ctx.fillRect(0,0,e.w,e.h),this._gcache=e}},{key:"render",value:function(t){var i=this.center(),o=this._getGradientCache(i);t.drawImage(o.canvas,Math.round(this.options.position.x-i.x),Math.round(this.options.position.y-i.y))}}]),o}(),u=function(){function i(t){e(this,i);this.options=Object.assign({diffuse:.8},t),this.uniqueId=0}return s(i,[{key:"cast",value:function(t,i,o){}},{key:"path",value:function(t){}},{key:"bounds",value:function(){return{topleft:new Vec2,bottomright:new Vec2}}},{key:"contains",value:function(t){return!1}}]),i}(),p=function(t){function n(t){e(this,n);var i=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),o={center:new w,radius:20};return i.options=Object.assign(o,i.options),i.options=Object.assign(i.options,t),i}return i(n,u),s(n,[{key:"cast",value:function(t,i,o){var n=this.options.center,e=n.sub(i),s=k(this.options.radius,e),a=s[0],r=s[1],h=a.add(i),c=r.add(i),u=(o.bottomright.x-o.topleft.x+(o.bottomright.y-o.topleft.y))/2;e=e.normalize().mul(u),a=a.normalize().mul(u),r=r.normalize().mul(u);var p=h.add(e),l=c.add(e),f=h.add(a),y=c.add(r),d=Math.atan2(e.x,-e.y);t.beginPath(),v(t,[c,y,l,p,f,h],!0),t.arc(n.x,n.y,this.options.radius,d,d+Math.PI),t.fill()}},{key:"path",value:function(t){t.arc(this.options.center.x,this.options.center.y,this.options.radius,0,o)}},{key:"bounds",value:function(){return{topleft:new w(this.options.center.x-this.options.radius,this.options.center.y-this.options.radius),bottomright:new w(this.options.center.x+this.options.radius,this.options.center.y+this.options.radius)}}},{key:"contains",value:function(t){return t.dist2(this.options.center)<this.options.radius*this.options.radius}}]),n}(),l=function(t){function o(t){e(this,o);var i=a(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return i.options=Object.assign({points:[]},i.options),i.options=Object.assign(i.options,t),i}return i(o,u),s(o,[{key:"bounds",value:function(){for(var t=this.options.points[0].copy(),i=t.copy(),o=1,n=this.options.points.length;o<n;++o){var e=this.options.points[o];e.x>i.x&&(i.x=e.x),e.y>i.y&&(i.y=e.y),e.x<t.x&&(t.x=e.x),e.y<t.y&&(t.y=e.y)}return{topleft:t,bottomright:i}}},{key:"contains",value:function(t){var i,o=this.options.points,n=o.length,e=n-1,s=t.x,a=t.y,r=!1;for(i=0;i<n;i++)(o[i].y<a&&o[e].y>=a||o[e].y<a&&o[i].y>=a)&&(o[i].x<=s||o[e].x<=s)&&o[i].x+(a-o[i].y)/(o[e].y-o[i].y)*(o[e].x-o[i].x)<s&&(r=!r),e=i;return r}},{key:"path",value:function(t){v(t,this.options.points)}},{key:"cast",value:function(p,l,t){var f=(t.bottomright.x-t.topleft.x+(t.bottomright.y-t.topleft.y))/2;this._forEachVisibleEdges(l,t,function(t,i,o,n,e){var s=o.inv().dot(e)/e.length2(),a=(s<0?t:1<s?i:t.add(e.mul(s))).sub(l);a=a.normalize().mul(f),o=o.normalize().mul(f),n=n.normalize().mul(f);var r=t.add(a),h=i.add(a),c=t.add(o),u=i.add(n);p.beginPath(),v(p,[t,i,u,h,r,c]),p.fill()})}},{key:"_forEachVisibleEdges",value:function(t,i,o){for(var n,e=this.options.points[this.options.points.length-1],s=0,a=this.options.points.length;s<a;++s,e=n)if(n=this.options.points[s],e.inBound(i.topleft,i.bottomright)){var r=e.sub(t),h=n.sub(t),c=n.sub(e);new w(c.y,-c.x).dot(r)<0&&o(e,n,r,h,c)}}}]),o}(),f=function(t){function n(t){e(this,n);var i=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t)),o={topleft:new w,bottomright:new w};return i.options=Object.assign(o,i.options),i.options=Object.assign(i.options,t),i.syncFromTopleftBottomright(),i}return i(n,l),s(n,[{key:"syncFromTopleftBottomright",value:function(){var t=this.options.topleft,i=new w(this.options.bottomright.x,this.options.topleft.y),o=this.options.bottomright,n=new w(this.options.topleft.x,this.options.bottomright.y);this.options.points=[t,i,o,n]}},{key:"fill",value:function(t){var i=this.options.points[0].x,o=this.options.points[0].y;t.rect(i,o,this.options.points[2].x-i,this.options.points[2].y-o)}}]),n}(),y=document.getElementById("screen"),d=y.getContext("2d"),g=new c({position:new w(200,150),distance:200}),b=new p({center:new w(100,100),radius:30}),m=new f({topleft:new w(250,200),bottomright:new w(350,250)});console.log("RECT",m);var _=new t({light:g,objects:[b,m]});_.compute(y.width,y.height),d.fillStyle="black",d.fillRect(0,0,y.width,y.height),_.render(d)});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWxsdW1pbmF0ZWQuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9WZWMyLmpzIiwiLi4vc3JjL2hlbHBlcnMuanMiLCIuLi9zcmMvTGlnaHQuanMiLCIuLi9zcmMvTGlnaHRpbmcuanMiLCIuLi9zcmMvTGFtcC5qcyIsIi4uL3NyYy9PcGFxdWVPYmplY3QuanMiLCIuLi9zcmMvRGlzY09iamVjdC5qcyIsIi4uL3NyYy9Qb2x5Z29uT2JqZWN0LmpzIiwiLi4vc3JjL1JlY3RhbmdsZU9iamVjdC5qcyIsIi4uL3NyYy9pbGx1bWluYXRlZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBWZWMyIHtcclxuICAgIGNvbnN0cnVjdG9yKHgsIHkpIHtcclxuICAgICAgICB0aGlzLnggPSB4IHx8IDBcclxuICAgICAgICB0aGlzLnkgPSB5IHx8IDBcclxuICAgIH1cclxuXHJcbiAgICBjb3B5KCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLngsIHRoaXMueSlcclxuICAgIH1cclxuXHJcbiAgICBkb3Qodikge1xyXG4gICAgICAgIHJldHVybiB2LnggKiB0aGlzLnggKyB2LnkgKiB0aGlzLnlcclxuICAgIH1cclxuXHJcbiAgICBzdWIodikge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLnggLSB2LngsIHRoaXMueSAtIHYueSlcclxuICAgIH1cclxuXHJcbiAgICBhZGQodikge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLnggKyB2LngsIHRoaXMueSArIHYueSlcclxuICAgIH1cclxuXHJcbiAgICBtdWwobikge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLnggKiBuLCB0aGlzLnkgKiBuKVxyXG4gICAgfVxyXG5cclxuICAgIGludigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdWwoLTEpXHJcbiAgICB9XHJcblxyXG4gICAgZGlzdDIodikge1xyXG4gICAgICAgIGxldCBkeCA9IHRoaXMueCAtIHYueFxyXG4gICAgICAgIGxldCBkeSA9IHRoaXMueSAtIHYueVxyXG4gICAgICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeVxyXG4gICAgfVxyXG5cclxuICAgIG5vcm1hbGl6ZSgpIHtcclxuICAgICAgICBsZXQgbGVuZ3RoID0gTWF0aC5zcXJ0KHRoaXMubGVuZ3RoMigpKVxyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLnggLyBsZW5ndGgsIHRoaXMueSAvIGxlbmd0aClcclxuICAgIH1cclxuXHJcbiAgICBsZW5ndGgyKHYpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueCArIFwiLFwiICsgdGhpcy55XHJcbiAgICB9XHJcblxyXG4gICAgaW5Cb3VuZCh0b3BMZWZ0LCBib3R0b21SaWdodCkge1xyXG4gICAgICAgIHJldHVybiAodG9wTGVmdC54IDwgdGhpcy54ICYmIHRoaXMueCA8IGJvdHRvbVJpZ2h0LnggJiZcclxuICAgICAgICAgICAgdG9wTGVmdC55IDwgdGhpcy55ICYmIHRoaXMueSA8IGJvdHRvbVJpZ2h0LnkpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFZlYzIiLCJpbXBvcnQgVmVjMiBmcm9tICcuL1ZlYzIuanMnXHJcblxyXG5leHBvcnQgY29uc3QgR09MREVOX0FOR0xFID0gTWF0aC5QSSAqICgzIC0gTWF0aC5zcXJ0KDUpKVxyXG5leHBvcnQgY29uc3QgXzJQSSA9IDIgKiBNYXRoLlBJXHJcblxyXG5mdW5jdGlvbiBwYXRoKGN0eCwgcG9pbnRzLCBkb250Sm9pbkxhc3QpIHtcclxuICAgIHZhciBwID0gcG9pbnRzWzBdXHJcbiAgICBjdHgubW92ZVRvKHAueCwgcC55KVxyXG4gICAgZm9yICh2YXIgaSA9IDEsIGwgPSBwb2ludHMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XHJcbiAgICAgICAgcCA9IHBvaW50c1tpXVxyXG4gICAgICAgIGN0eC5saW5lVG8ocC54LCBwLnkpXHJcbiAgICB9XHJcbiAgICBpZiAoIWRvbnRKb2luTGFzdCAmJiBwb2ludHMubGVuZ3RoID4gMikge1xyXG4gICAgICAgIHAgPSBwb2ludHNbMF1cclxuICAgICAgICBjdHgubGluZVRvKHAueCwgcC55KVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYW52YXNBbmQyZENvbnRleHQoaWQsIHcsIGgpIHtcclxuICAgIHZhciBpaWQgPSAnaWxsdWpzXycgKyBpZFxyXG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlpZClcclxuXHJcbiAgICBpZiAoY2FudmFzID09PSBudWxsKSB7XHJcbiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIilcclxuICAgICAgICBjYW52YXMuaWQgPSBpaWRcclxuICAgICAgICBjYW52YXMud2lkdGggPSB3XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhcclxuICAgICAgICBjYW52YXMuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpXHJcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuXHJcbiAgICBjYW52YXMud2lkdGggPSB3XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gaFxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgY2FudmFzOiBjYW52YXMsXHJcbiAgICAgICAgY3R4OiBjdHgsXHJcbiAgICAgICAgdzogdyxcclxuICAgICAgICBoOiBoXHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBnZXRSR0JBID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vdmFyIGN0eCA9IGNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dCgnZ3JnYmEnLCAxLCAxKVxyXG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIilcclxuICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5oZWlnaHQgPSAxXHJcbiAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKVxyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoY29sb3IsIGFscGhhKSB7XHJcbiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCAxLCAxKVxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvclxyXG4gICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCAxLCAxKVxyXG4gICAgICAgIHZhciBkID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhXHJcbiAgICAgICAgcmV0dXJuICdyZ2JhKCcgKyBbZFswXSwgZFsxXSwgZFsyXSwgYWxwaGFdICsgJyknXHJcbiAgICB9XHJcbn0oKSlcclxuXHJcbmZ1bmN0aW9uIGdldFRhbjIocmFkaXVzLCBjZW50ZXIpIHtcclxuICAgIHZhciBlcHNpbG9uID0gZ2V0VGFuMi5lcHNpbG9uIHx8IDFlLTYsIC8vIGNvbnN0YW50XHJcbiAgICAgICAgeDAsIHkwLCBsZW4yLCBzb2xuLFxyXG4gICAgICAgIHNvbHV0aW9ucyA9IFtdLFxyXG4gICAgICAgIGEgPSByYWRpdXNcclxuICAgIGlmICh0eXBlb2YgYSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgY2VudGVyID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgdmFyIHRtcCA9IGFcclxuICAgICAgICBjZW50ZXIgPSBhXHJcbiAgICAgICAgY2VudGVyID0gdG1wIC8vIHN3YXBcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY2VudGVyID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgLy8gZ2V0VGFuMihyYWRpdXM6bnVtYmVyLCB4MDpudW1iZXIsIHkwOm51bWJlcilcclxuICAgICAgICB4MCA9IGNlbnRlclxyXG4gICAgICAgIHkwID0gYXJndW1lbnRzWzJdXHJcbiAgICAgICAgbGVuMiA9IHgwICogeDAgKyB5MCAqIHkwXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGdldFRhbnMyKHJhZGl1czpudW1iZXIsIGNlbnRlcjpvYmplY3Q9e3g6eDAseTp5MH0pXHJcbiAgICAgICAgeDAgPSBjZW50ZXIueFxyXG4gICAgICAgIHkwID0gY2VudGVyLnlcclxuICAgICAgICBsZW4yID0gY2VudGVyLmxlbmd0aDIoKVxyXG4gICAgfVxyXG4gICAgLy8gdCA9ICsvLSBNYXRoLmFjb3MoICgtYSp4MCArLy0geTAgKiBNYXRoLnNxcnQoeDAqeDAgKyB5MCp5MCAtIGEqYSkpLyh4MCp4MCArIHkwKnkpIClcclxuICAgIHZhciBsZW4yYSA9IHkwICogTWF0aC5zcXJ0KGxlbjIgLSBhICogYSksXHJcbiAgICAgICAgdHQgPSBNYXRoLmFjb3MoKC1hICogeDAgKyBsZW4yYSkgLyBsZW4yKSxcclxuICAgICAgICBudCA9IE1hdGguYWNvcygoLWEgKiB4MCAtIGxlbjJhKSAvIGxlbjIpLFxyXG4gICAgICAgIHR0X2NvcyA9IGEgKiBNYXRoLmNvcyh0dCksXHJcbiAgICAgICAgdHRfc2luID0gYSAqIE1hdGguc2luKHR0KSxcclxuICAgICAgICBudF9jb3MgPSBhICogTWF0aC5jb3MobnQpLFxyXG4gICAgICAgIG50X3NpbiA9IGEgKiBNYXRoLnNpbihudClcclxuXHJcbiAgICAvLyBOb3RlOiBjb3MoLXQpID09IGNvcyh0KSBhbmQgc2luKC10KSA9PSAtc2luKHQpIGZvciBhbGwgdCwgc28gZmluZFxyXG4gICAgLy8geDAgKyBhKmNvcyh0KSwgeTAgKy8tIGEqc2luKHQpXHJcbiAgICAvLyBTb2x1dGlvbnMgaGF2ZSBlcXVhbCBsZW5ndGhzXHJcbiAgICBzb2xuID0gbmV3IFZlYzIoeDAgKyBudF9jb3MsIHkwICsgbnRfc2luKVxyXG4gICAgc29sdXRpb25zLnB1c2goc29sbilcclxuICAgIHZhciBkaXN0MCA9IHNvbG4ubGVuZ3RoMigpXHJcblxyXG4gICAgc29sbiA9IG5ldyBWZWMyKHgwICsgdHRfY29zLCB5MCAtIHR0X3NpbilcclxuICAgIHNvbHV0aW9ucy5wdXNoKHNvbG4pXHJcbiAgICB2YXIgZGlzdDEgPSBzb2xuLmxlbmd0aDIoKVxyXG4gICAgaWYgKE1hdGguYWJzKGRpc3QwIC0gZGlzdDEpIDwgZXBzaWxvbikgcmV0dXJuIHNvbHV0aW9uc1xyXG5cclxuICAgIHNvbG4gPSBuZXcgVmVjMih4MCArIG50X2NvcywgeTAgLSBudF9zaW4pXHJcbiAgICBzb2x1dGlvbnMucHVzaChzb2xuKVxyXG4gICAgdmFyIGRpc3QyID0gc29sbi5sZW5ndGgyKClcclxuICAgIC8vIENoYW5nZWQgb3JkZXIgc28gbm8gc3RyYW5nZSBYIG9mIGxpZ2h0IGluc2lkZSB0aGUgY2lyY2xlLiBDb3VsZCBhbHNvIHNvcnQgcmVzdWx0cy5cclxuICAgIGlmIChNYXRoLmFicyhkaXN0MSAtIGRpc3QyKSA8IGVwc2lsb24pIHJldHVybiBbc29sbiwgc29sdXRpb25zWzFdXVxyXG4gICAgaWYgKE1hdGguYWJzKGRpc3QwIC0gZGlzdDIpIDwgZXBzaWxvbikgcmV0dXJuIFtzb2x1dGlvbnNbMF0sIHNvbG5dXHJcblxyXG4gICAgc29sbiA9IG5ldyBWZWMyKHgwICsgdHRfY29zLCB5MCArIHR0X3NpbilcclxuICAgIHNvbHV0aW9ucy5wdXNoKHNvbG4pXHJcbiAgICB2YXIgZGlzdDMgPSBzb2xuLmxlbmd0aDIoKVxyXG4gICAgaWYgKE1hdGguYWJzKGRpc3QyIC0gZGlzdDMpIDwgZXBzaWxvbikgcmV0dXJuIFtzb2x1dGlvbnNbMl0sIHNvbG5dXHJcbiAgICBpZiAoTWF0aC5hYnMoZGlzdDEgLSBkaXN0MykgPCBlcHNpbG9uKSByZXR1cm4gW3NvbHV0aW9uc1sxXSwgc29sbl1cclxuICAgIGlmIChNYXRoLmFicyhkaXN0MCAtIGRpc3QzKSA8IGVwc2lsb24pIHJldHVybiBbc29sdXRpb25zWzBdLCBzb2xuXVxyXG5cclxuICAgIC8vIHJldHVybiBhbGwgNCBzb2x1dGlvbnMgaWYgbm8gbWF0Y2hpbmcgdmVjdG9yIGxlbmd0aHMgZm91bmQuXHJcbiAgICByZXR1cm4gc29sdXRpb25zXHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgICBjcmVhdGVDYW52YXNBbmQyZENvbnRleHQsXHJcbiAgICBnZXRSR0JBLFxyXG4gICAgZ2V0VGFuMixcclxuICAgIHBhdGhcclxufSIsImltcG9ydCBWZWMyIGZyb20gJy4vVmVjMi5qcydcclxuXHJcbmNsYXNzIExpZ2h0IHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBWZWMyKCksXHJcbiAgICAgICAgICAgIGRpc3RhbmNlOiAxMDAsXHJcbiAgICAgICAgICAgIGRpZmZ1c2U6IDAuOFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRzLCBvcHRpb25zKVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcihjdHgpIHt9XHJcblxyXG4gICAgbWFzayhjdHgpIHtcclxuICAgICAgICB2YXIgYyA9IHRoaXMuX2dldFZpc2libGVNYXNrQ2FjaGUoKVxyXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoXHJcbiAgICAgICAgICAgIGMuY2FudmFzLFxyXG4gICAgICAgICAgICBNYXRoLnJvdW5kKHRoaXMub3B0aW9ucy5wb3NpdGlvbi54IC0gYy53IC8gMiksXHJcbiAgICAgICAgICAgIE1hdGgucm91bmQodGhpcy5vcHRpb25zLnBvc2l0aW9uLnkgLSBjLmggLyAyKVxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBib3VuZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG9wbGVmdDogbmV3IFZlYzIodGhpcy5vcHRpb25zLnBvc2l0aW9uLnggLSB0aGlzLm9wdGlvbnMuZGlzdGFuY2UsIHRoaXMub3B0aW9ucy5wb3NpdGlvbi55IC0gdGhpcy5vcHRpb25zLmRpc3RhbmNlKSxcclxuICAgICAgICAgICAgYm90dG9tcmlnaHQ6IG5ldyBWZWMyKHRoaXMub3B0aW9ucy5wb3NpdGlvbi54ICsgdGhpcy5vcHRpb25zLmRpc3RhbmNlLCB0aGlzLm9wdGlvbnMucG9zaXRpb24ueSArIHRoaXMub3B0aW9ucy5kaXN0YW5jZSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2VudGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLm9wdGlvbnMuZGlzdGFuY2UsIHRoaXMub3B0aW9ucy5kaXN0YW5jZSlcclxuICAgIH1cclxuXHJcbiAgICBmb3JFYWNoU2FtcGxlKGYpIHtcclxuICAgICAgICBmKHRoaXMub3B0aW9ucy5wb3NpdGlvbilcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0VmlzaWJsZU1hc2tDYWNoZSgpIHtcclxuICAgICAgICB2YXIgZCA9IE1hdGguZmxvb3IodGhpcy5vcHRpb25zLmRpc3RhbmNlICogMS40KVxyXG4gICAgICAgIHZhciBoYXNoID0gXCJcIiArIGRcclxuICAgICAgICBpZiAodGhpcy52aXNtYXNraGFzaCAhPSBoYXNoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzbWFza2hhc2ggPSBoYXNoXHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5fdmlzbWFza2NhY2hlID0gY3JlYXRlQ2FudmFzQW5kMmRDb250ZXh0KCd2bScgKyB0aGlzLmlkLCAyICogZCwgMiAqIGQpXHJcbiAgICAgICAgICAgIHZhciBnID0gYy5jdHguY3JlYXRlUmFkaWFsR3JhZGllbnQoZCwgZCwgMCwgZCwgZCwgZClcclxuICAgICAgICAgICAgZy5hZGRDb2xvclN0b3AoMCwgJ3JnYmEoMCwwLDAsMSknKVxyXG4gICAgICAgICAgICBnLmFkZENvbG9yU3RvcCgxLCAncmdiYSgwLDAsMCwwKScpXHJcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IGdcclxuICAgICAgICAgICAgYy5jdHguZmlsbFJlY3QoMCwgMCwgYy53LCBjLmgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl92aXNtYXNrY2FjaGVcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SGFzaENhY2hlKCkge1xyXG4gICAgICAgIHJldHVybiBbdGhpcy5vcHRpb25zLmRpc3RhbmNlLCB0aGlzLm9wdGlvbnMuZGlmZnVzZV0udG9TdHJpbmcoKVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBMaWdodCIsImltcG9ydCB7IGNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dCB9IGZyb20gJy4vaGVscGVycy5qcydcclxuaW1wb3J0IExpZ2h0IGZyb20gJy4vTGlnaHQuanMnXHJcblxyXG5jbGFzcyBMaWdodGluZyB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIGxpZ2h0OiBuZXcgTGlnaHQoKSxcclxuICAgICAgICAgICAgb2JqZWN0czogW11cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgdGhpcy5vcHRpb25zKVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUNhY2hlKHcsIGgpIHtcclxuICAgICAgICB0aGlzLl9jYWNoZSA9IGNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dCgnbGMnLCB3LCBoKVxyXG4gICAgICAgIHRoaXMuX2Nhc3RjYWNoZSA9IGNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dCgnbGNjJywgdywgaClcclxuICAgIH1cclxuXHJcbiAgICBjYXN0KGN0eG91dHB1dCkge1xyXG4gICAgICAgIHZhciBsaWdodCA9IHRoaXMub3B0aW9ucy5saWdodFxyXG4gICAgICAgIHZhciBuID0gbGlnaHQuc2FtcGxlc1xyXG4gICAgICAgIHZhciBjID0gdGhpcy5fY2FzdGNhY2hlXHJcbiAgICAgICAgdmFyIGN0eCA9IGMuY3R4XHJcbiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjLncsIGMuaClcclxuICAgICAgICAvLyBEcmF3IHNoYWRvd3MgZm9yIGVhY2ggbGlnaHQgc2FtcGxlIGFuZCBvYmplY3RzXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwicmdiYSgwLDAsMCxcIiArIE1hdGgucm91bmQoMTAwIC8gbikgLyAxMDAgKyBcIilcIiAvLyBJcyB0aGVyZSBhbnkgYmV0dGVyIHdheT9cclxuICAgICAgICB2YXIgYm91bmRzID0gbGlnaHQuYm91bmRzKClcclxuICAgICAgICB2YXIgb2JqZWN0cyA9IHRoaXMub3B0aW9ucy5vYmplY3RzXHJcbiAgICAgICAgbGlnaHQuZm9yRWFjaFNhbXBsZShmdW5jdGlvbiAocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgdmFyIHNhbXBsZUluT2JqZWN0ID0gZmFsc2VcclxuICAgICAgICAgICAgZm9yICh2YXIgbyA9IDAsIGwgPSBvYmplY3RzLmxlbmd0aDsgbyA8IGw7ICsrbykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdHNbb10uY29udGFpbnMocG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KGJvdW5kcy50b3BsZWZ0LngsIGJvdW5kcy50b3BsZWZ0LnksIGJvdW5kcy5ib3R0b21yaWdodC54IC0gYm91bmRzLnRvcGxlZnQueCwgYm91bmRzLmJvdHRvbXJpZ2h0LnkgLSBib3VuZHMudG9wbGVmdC55KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0LmNhc3QoY3R4LCBwb3NpdGlvbiwgYm91bmRzKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gRHJhdyBvYmplY3RzIGRpZmZ1c2UgLSB0aGUgaW50ZW5zaXR5IG9mIHRoZSBsaWdodCBwZW5ldHJhdGlvbiBpbiBvYmplY3RzXHJcbiAgICAgICAgb2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChvYmplY3QpIHtcclxuICAgICAgICAgICAgdmFyIGRpZmZ1c2UgPSBvYmplY3QuZGlmZnVzZSA9PT0gdW5kZWZpbmVkID8gMC44IDogb2JqZWN0LmRpZmZ1c2VcclxuICAgICAgICAgICAgZGlmZnVzZSAqPSBsaWdodC5kaWZmdXNlXHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcInJnYmEoMCwwLDAsXCIgKyAoMSAtIGRpZmZ1c2UpICsgXCIpXCJcclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpXHJcbiAgICAgICAgICAgIG9iamVjdC5wYXRoKGN0eClcclxuICAgICAgICAgICAgY3R4LmZpbGwoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgY3R4b3V0cHV0LmRyYXdJbWFnZShjLmNhbnZhcywgMCwgMClcclxuICAgIH1cclxuXHJcbiAgICBjb21wdXRlKHcsIGgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlIHx8IHRoaXMuX2NhY2hlLncgIT0gdyB8fCB0aGlzLl9jYWNoZS5oICE9IGgpXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ2FjaGUodywgaClcclxuICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY2FjaGUuY3R4XHJcbiAgICAgICAgdmFyIGxpZ2h0ID0gdGhpcy5vcHRpb25zLmxpZ2h0XHJcbiAgICAgICAgY3R4LnNhdmUoKVxyXG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpXHJcblxyXG4gICAgICAgIGxpZ2h0LnJlbmRlcihjdHgpXHJcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiZGVzdGluYXRpb24tb3V0XCJcclxuICAgICAgICB0aGlzLmNhc3QoY3R4KVxyXG4gICAgICAgIGN0eC5yZXN0b3JlKClcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoY3R4KSB7XHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLl9jYWNoZS5jYW52YXMsIDAsIDApXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FudmFzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZS5jYW52YXNcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTGlnaHRpbmciLCJpbXBvcnQgVmVjMiBmcm9tICcuL1ZlYzInXHJcbmltcG9ydCBMaWdodCBmcm9tICcuL0xpZ2h0LmpzJ1xyXG5pbXBvcnQgeyBjcmVhdGVDYW52YXNBbmQyZENvbnRleHQsIGdldFJHQkEgfSBmcm9tICcuL2hlbHBlcnMuanMnXHJcblxyXG5jbGFzcyBMYW1wIGV4dGVuZHMgTGlnaHQge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgaWQ6IDAsXHJcbiAgICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTAsMjIwLDE1MCwwLjgpJyxcclxuICAgICAgICAgICAgcmFkaXVzOiAwLFxyXG4gICAgICAgICAgICBzYW1wbGVzOiAxLFxyXG4gICAgICAgICAgICBhbmdsZTogMCxcclxuICAgICAgICAgICAgcm91Z2huZXNzOiAwXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oZGVmYXVsdHMsIHRoaXMub3B0aW9ucylcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SGFzaENhY2hlKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jb2xvcixcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRpc3RhbmNlLFxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGlmZnVzZSxcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFuZ2xlLFxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucm91Z2huZXNzLFxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuc2FtcGxlcyxcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJhZGl1c1xyXG4gICAgICAgIF0udG9TdHJpbmcoKVxyXG4gICAgfVxyXG5cclxuICAgIGNlbnRlcigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoXHJcbiAgICAgICAgICAgICgxIC0gTWF0aC5jb3ModGhpcy5vcHRpb25zLmFuZ2xlKSAqIHRoaXMub3B0aW9ucy5yb3VnaG5lc3MpICogdGhpcy5vcHRpb25zLmRpc3RhbmNlLFxyXG4gICAgICAgICAgICAoMSArIE1hdGguc2luKHRoaXMub3B0aW9ucy5hbmdsZSkgKiB0aGlzLm9wdGlvbnMucm91Z2huZXNzKSAqIHRoaXMub3B0aW9ucy5kaXN0YW5jZVxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBib3VuZHMoKSB7XHJcbiAgICAgICAgdmFyIG9yaWVudGF0aW9uQ2VudGVyID0gbmV3IFZlYzIoXHJcbiAgICAgICAgICAgIE1hdGguY29zKHRoaXMub3B0aW9ucy5hbmdsZSksIC1NYXRoLnNpbih0aGlzLm9wdGlvbnMuYW5nbGUpXHJcbiAgICAgICAgKS5tdWwodGhpcy5vcHRpb25zLnJvdWdobmVzcyAqIHRoaXMub3B0aW9ucy5kaXN0YW5jZSlcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b3BsZWZ0OiBuZXcgVmVjMihcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5wb3NpdGlvbi54ICsgb3JpZW50YXRpb25DZW50ZXIueCAtIHRoaXMub3B0aW9ucy5kaXN0YW5jZSxcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5wb3NpdGlvbi55ICsgb3JpZW50YXRpb25DZW50ZXIueSAtIHRoaXMub3B0aW9ucy5kaXN0YW5jZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBib3R0b21yaWdodDogbmV3IFZlYzIoXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMucG9zaXRpb24ueCArIG9yaWVudGF0aW9uQ2VudGVyLnggKyB0aGlzLm9wdGlvbnMuZGlzdGFuY2UsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMucG9zaXRpb24ueSArIG9yaWVudGF0aW9uQ2VudGVyLnkgKyB0aGlzLm9wdGlvbnMuZGlzdGFuY2VcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtYXNrKGN0eCkge1xyXG4gICAgICAgIHZhciBjID0gdGhpcy5fZ2V0VmlzaWJsZU1hc2tDYWNoZSgpXHJcbiAgICAgICAgdmFyIG9yaWVudGF0aW9uQ2VudGVyID0gbmV3IFZlYzIoXHJcbiAgICAgICAgICAgIE1hdGguY29zKHRoaXMub3B0aW9ucy5hbmdsZSksIC1NYXRoLnNpbih0aGlzLm9wdGlvbnMuYW5nbGUpXHJcbiAgICAgICAgKS5tdWwodGhpcy5vcHRpb25zLnJvdWdobmVzcyAqIHRoaXMub3B0aW9ucy5kaXN0YW5jZSlcclxuICAgICAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICAgICAgICBjLmNhbnZhcywgTWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMucG9zaXRpb24ueCArIG9yaWVudGF0aW9uQ2VudGVyLnggLSBjLncgLyAyKSxcclxuICAgICAgICAgICAgTWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMucG9zaXRpb24ueSArIG9yaWVudGF0aW9uQ2VudGVyLnkgLSBjLmggLyAyKVxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0R3JhZGllbnRDYWNoZShjZW50ZXIpIHtcclxuICAgICAgICB2YXIgaGFzaGNvZGUgPSB0aGlzLl9nZXRIYXNoQ2FjaGUoKVxyXG4gICAgICAgIGlmICh0aGlzLl9jYWNoZUhhc2hjb2RlID09IGhhc2hjb2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nY2FjaGVcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY2FjaGVIYXNoY29kZSA9IGhhc2hjb2RlXHJcbiAgICAgICAgdmFyIGQgPSBNYXRoLnJvdW5kKHRoaXMub3B0aW9ucy5kaXN0YW5jZSlcclxuICAgICAgICB2YXIgRCA9IGQgKiAyXHJcbiAgICAgICAgdmFyIGNhY2hlID0gY3JlYXRlQ2FudmFzQW5kMmRDb250ZXh0KCdnYycgKyB0aGlzLmlkLCBELCBEKVxyXG4gICAgICAgIHZhciBnID0gY2FjaGUuY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KGNlbnRlci54LCBjZW50ZXIueSwgMCwgZCwgZCwgZClcclxuICAgICAgICBnLmFkZENvbG9yU3RvcChNYXRoLm1pbigxLCB0aGlzLm9wdGlvbnMucmFkaXVzIC8gdGhpcy5vcHRpb25zLmRpc3RhbmNlKSwgdGhpcy5vcHRpb25zLmNvbG9yKVxyXG4gICAgICAgIGcuYWRkQ29sb3JTdG9wKDEsIGdldFJHQkEodGhpcy5vcHRpb25zLmNvbG9yLCAwKSlcclxuICAgICAgICBjYWNoZS5jdHguZmlsbFN0eWxlID0gZ1xyXG4gICAgICAgIGNhY2hlLmN0eC5maWxsUmVjdCgwLCAwLCBjYWNoZS53LCBjYWNoZS5oKVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9nY2FjaGUgPSBjYWNoZVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcihjdHgpIHtcclxuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy5jZW50ZXIoKVxyXG4gICAgICAgIHZhciBjID0gdGhpcy5fZ2V0R3JhZGllbnRDYWNoZShjZW50ZXIpXHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZShcclxuICAgICAgICAgICAgYy5jYW52YXMsXHJcbiAgICAgICAgICAgIE1hdGgucm91bmQodGhpcy5vcHRpb25zLnBvc2l0aW9uLnggLSBjZW50ZXIueCksXHJcbiAgICAgICAgICAgIE1hdGgucm91bmQodGhpcy5vcHRpb25zLnBvc2l0aW9uLnkgLSBjZW50ZXIueSlcclxuICAgICAgICApXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExhbXAiLCJjbGFzcyBPcGFxdWVPYmplY3Qge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICBkaWZmdXNlOiAwLjhcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgb3B0aW9ucylcclxuICAgICAgICB0aGlzLnVuaXF1ZUlkID0gMFxyXG4gICAgfVxyXG5cclxuICAgIGNhc3QoY3R4LCBvcmlnaW4sIGJvdW5kcykge31cclxuXHJcbiAgICBwYXRoKGN0eCkge31cclxuXHJcbiAgICBib3VuZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG9wbGVmdDogbmV3IFZlYzIoKSxcclxuICAgICAgICAgICAgYm90dG9tcmlnaHQ6IG5ldyBWZWMyKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29udGFpbnMocG9pbnQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgT3BhcXVlT2JqZWN0IiwiaW1wb3J0IFZlYzIgZnJvbSAnLi9WZWMyLmpzJ1xyXG5pbXBvcnQgeyBnZXRUYW4yLCBwYXRoLCBfMlBJIH0gZnJvbSAnLi9oZWxwZXJzLmpzJ1xyXG5pbXBvcnQgT3BhcXVlT2JqZWN0IGZyb20gJy4vT3BhcXVlT2JqZWN0LmpzJ1xyXG5cclxuY2xhc3MgRGlzY09iamVjdCBleHRlbmRzIE9wYXF1ZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgc3VwZXIoKVxyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICBjZW50ZXI6IG5ldyBWZWMyKCksXHJcbiAgICAgICAgICAgIHJhZGl1czogMjBcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgdGhpcy5vcHRpb25zKVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgfVxyXG4gICAgY2FzdChjdHgsIG9yaWdpbiwgYm91bmRzKSB7XHJcbiAgICAgICAgdmFyIG0gPSB0aGlzLm9wdGlvbnMuY2VudGVyXHJcbiAgICAgICAgdmFyIG9yaWdpblRvTSA9IG0uc3ViKG9yaWdpbilcclxuICAgICAgICB2YXIgdGFuZ2VudExpbmVzID0gZ2V0VGFuMih0aGlzLm9wdGlvbnMucmFkaXVzLCBvcmlnaW5Ub00pXHJcbiAgICAgICAgdmFyIG9yaWdpblRvQSA9IHRhbmdlbnRMaW5lc1swXVxyXG4gICAgICAgIHZhciBvcmlnaW5Ub0IgPSB0YW5nZW50TGluZXNbMV1cclxuICAgICAgICB2YXIgYSA9IG9yaWdpblRvQS5hZGQob3JpZ2luKVxyXG4gICAgICAgIHZhciBiID0gb3JpZ2luVG9CLmFkZChvcmlnaW4pXHJcbiAgICAgICAgLy8gbm9ybWFsaXplIHRvIGRpc3RhbmNlXHJcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gKChib3VuZHMuYm90dG9tcmlnaHQueCAtIGJvdW5kcy50b3BsZWZ0LngpICsgKGJvdW5kcy5ib3R0b21yaWdodC55IC0gYm91bmRzLnRvcGxlZnQueSkpIC8gMlxyXG4gICAgICAgIG9yaWdpblRvTSA9IG9yaWdpblRvTS5ub3JtYWxpemUoKS5tdWwoZGlzdGFuY2UpXHJcbiAgICAgICAgb3JpZ2luVG9BID0gb3JpZ2luVG9BLm5vcm1hbGl6ZSgpLm11bChkaXN0YW5jZSlcclxuICAgICAgICBvcmlnaW5Ub0IgPSBvcmlnaW5Ub0Iubm9ybWFsaXplKCkubXVsKGRpc3RhbmNlKVxyXG4gICAgICAgIC8vIHByb2plY3QgcG9pbnRzXHJcbiAgICAgICAgdmFyIG9hbSA9IGEuYWRkKG9yaWdpblRvTSlcclxuICAgICAgICB2YXIgb2JtID0gYi5hZGQob3JpZ2luVG9NKVxyXG4gICAgICAgIHZhciBhcCA9IGEuYWRkKG9yaWdpblRvQSlcclxuICAgICAgICB2YXIgYnAgPSBiLmFkZChvcmlnaW5Ub0IpXHJcbiAgICAgICAgdmFyIHN0YXJ0ID0gTWF0aC5hdGFuMihvcmlnaW5Ub00ueCwgLW9yaWdpblRvTS55KVxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKVxyXG4gICAgICAgIHBhdGgoY3R4LCBbYiwgYnAsIG9ibSwgb2FtLCBhcCwgYV0sIHRydWUpXHJcbiAgICAgICAgY3R4LmFyYyhtLngsIG0ueSwgdGhpcy5vcHRpb25zLnJhZGl1cywgc3RhcnQsIHN0YXJ0ICsgTWF0aC5QSSlcclxuICAgICAgICBjdHguZmlsbCgpXHJcbiAgICB9XHJcbiAgICBwYXRoKGN0eCkge1xyXG4gICAgICAgIGN0eC5hcmModGhpcy5vcHRpb25zLmNlbnRlci54LCB0aGlzLm9wdGlvbnMuY2VudGVyLnksIHRoaXMub3B0aW9ucy5yYWRpdXMsIDAsIF8yUEkpXHJcbiAgICB9XHJcbiAgICBib3VuZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG9wbGVmdDogbmV3IFZlYzIodGhpcy5vcHRpb25zLmNlbnRlci54IC0gdGhpcy5vcHRpb25zLnJhZGl1cywgdGhpcy5vcHRpb25zLmNlbnRlci55IC0gdGhpcy5vcHRpb25zLnJhZGl1cyksXHJcbiAgICAgICAgICAgIGJvdHRvbXJpZ2h0OiBuZXcgVmVjMih0aGlzLm9wdGlvbnMuY2VudGVyLnggKyB0aGlzLm9wdGlvbnMucmFkaXVzLCB0aGlzLm9wdGlvbnMuY2VudGVyLnkgKyB0aGlzLm9wdGlvbnMucmFkaXVzKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnRhaW5zKHBvaW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHBvaW50LmRpc3QyKHRoaXMub3B0aW9ucy5jZW50ZXIpIDwgdGhpcy5vcHRpb25zLnJhZGl1cyAqIHRoaXMub3B0aW9ucy5yYWRpdXNcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRGlzY09iamVjdCIsImltcG9ydCBWZWMyIGZyb20gJy4vVmVjMi5qcydcclxuaW1wb3J0IHsgcGF0aCB9IGZyb20gJy4vaGVscGVycy5qcydcclxuaW1wb3J0IE9wYXF1ZU9iamVjdCBmcm9tICcuL09wYXF1ZU9iamVjdC5qcydcclxuXHJcbmNsYXNzIFBvbHlnb25PYmplY3QgZXh0ZW5kcyBPcGFxdWVPYmplY3Qge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgcG9pbnRzOiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRzLCB0aGlzLm9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXHJcbiAgICB9XHJcblxyXG4gICAgYm91bmRzKCkge1xyXG4gICAgICAgIHZhciB0b3BsZWZ0ID0gdGhpcy5vcHRpb25zLnBvaW50c1swXS5jb3B5KClcclxuICAgICAgICB2YXIgYm90dG9tcmlnaHQgPSB0b3BsZWZ0LmNvcHkoKVxyXG4gICAgICAgIGZvciAodmFyIHAgPSAxLCBsID0gdGhpcy5vcHRpb25zLnBvaW50cy5sZW5ndGg7IHAgPCBsOyArK3ApIHtcclxuICAgICAgICAgICAgdmFyIHBvaW50ID0gdGhpcy5vcHRpb25zLnBvaW50c1twXVxyXG4gICAgICAgICAgICBpZiAocG9pbnQueCA+IGJvdHRvbXJpZ2h0LngpXHJcbiAgICAgICAgICAgICAgICBib3R0b21yaWdodC54ID0gcG9pbnQueFxyXG4gICAgICAgICAgICBpZiAocG9pbnQueSA+IGJvdHRvbXJpZ2h0LnkpXHJcbiAgICAgICAgICAgICAgICBib3R0b21yaWdodC55ID0gcG9pbnQueVxyXG4gICAgICAgICAgICBpZiAocG9pbnQueCA8IHRvcGxlZnQueClcclxuICAgICAgICAgICAgICAgIHRvcGxlZnQueCA9IHBvaW50LnhcclxuICAgICAgICAgICAgaWYgKHBvaW50LnkgPCB0b3BsZWZ0LnkpXHJcbiAgICAgICAgICAgICAgICB0b3BsZWZ0LnkgPSBwb2ludC55XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcGxlZnQ6IHRvcGxlZnQsXHJcbiAgICAgICAgICAgIGJvdHRvbXJpZ2h0OiBib3R0b21yaWdodFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb250YWlucyhwKSB7XHJcbiAgICAgICAgdmFyIHBvaW50cyA9IHRoaXMub3B0aW9ucy5wb2ludHNcclxuICAgICAgICB2YXIgaSwgbCA9IHBvaW50cy5sZW5ndGgsXHJcbiAgICAgICAgICAgIGogPSBsIC0gMVxyXG4gICAgICAgIHZhciB4ID0gcC54LFxyXG4gICAgICAgICAgICB5ID0gcC55XHJcbiAgICAgICAgdmFyIG9kZE5vZGVzID0gZmFsc2VcclxuXHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoKHBvaW50c1tpXS55IDwgeSAmJiBwb2ludHNbal0ueSA+PSB5IHx8XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzW2pdLnkgPCB5ICYmIHBvaW50c1tpXS55ID49IHkpICYmXHJcbiAgICAgICAgICAgICAgICAocG9pbnRzW2ldLnggPD0geCB8fCBwb2ludHNbal0ueCA8PSB4KSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvaW50c1tpXS54ICsgKHkgLSBwb2ludHNbaV0ueSkgLyAocG9pbnRzW2pdLnkgLSBwb2ludHNbaV0ueSkgKiAocG9pbnRzW2pdLnggLSBwb2ludHNbaV0ueCkgPCB4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2RkTm9kZXMgPSAhb2RkTm9kZXNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBqID0gaVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2RkTm9kZXNcclxuICAgIH1cclxuXHJcbiAgICBwYXRoKGN0eCkge1xyXG4gICAgICAgIHBhdGgoY3R4LCB0aGlzLm9wdGlvbnMucG9pbnRzKVxyXG4gICAgfVxyXG5cclxuICAgIGNhc3QoY3R4LCBvcmlnaW4sIGJvdW5kcykge1xyXG4gICAgICAgIC8vIFRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIHByb2plY3Rpb24gaXMgYSBiaXQgaGFja3kuLi4gZG8geW91IGhhdmUgYSBwcm9wZXIgc29sdXRpb24/XHJcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gKChib3VuZHMuYm90dG9tcmlnaHQueCAtIGJvdW5kcy50b3BsZWZ0LngpICsgKGJvdW5kcy5ib3R0b21yaWdodC55IC0gYm91bmRzLnRvcGxlZnQueSkpIC8gMlxyXG4gICAgICAgIHRoaXMuX2ZvckVhY2hWaXNpYmxlRWRnZXMob3JpZ2luLCBib3VuZHMsIGZ1bmN0aW9uIChhLCBiLCBvcmlnaW5Ub0EsIG9yaWdpblRvQiwgYVRvQikge1xyXG4gICAgICAgICAgICB2YXIgbSAvLyBtIGlzIHRoZSBwcm9qZWN0ZWQgcG9pbnQgb2Ygb3JpZ2luIHRvIFthLCBiXVxyXG4gICAgICAgICAgICB2YXIgdCA9IG9yaWdpblRvQS5pbnYoKS5kb3QoYVRvQikgLyBhVG9CLmxlbmd0aDIoKVxyXG4gICAgICAgICAgICBpZiAodCA8IDApXHJcbiAgICAgICAgICAgICAgICBtID0gYVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0ID4gMSlcclxuICAgICAgICAgICAgICAgIG0gPSBiXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG0gPSBhLmFkZChhVG9CLm11bCh0KSlcclxuICAgICAgICAgICAgdmFyIG9yaWdpblRvTSA9IG0uc3ViKG9yaWdpbilcclxuICAgICAgICAgICAgLy8gbm9ybWFsaXplIHRvIGRpc3RhbmNlXHJcbiAgICAgICAgICAgIG9yaWdpblRvTSA9IG9yaWdpblRvTS5ub3JtYWxpemUoKS5tdWwoZGlzdGFuY2UpXHJcbiAgICAgICAgICAgIG9yaWdpblRvQSA9IG9yaWdpblRvQS5ub3JtYWxpemUoKS5tdWwoZGlzdGFuY2UpXHJcbiAgICAgICAgICAgIG9yaWdpblRvQiA9IG9yaWdpblRvQi5ub3JtYWxpemUoKS5tdWwoZGlzdGFuY2UpXHJcbiAgICAgICAgICAgIC8vIHByb2plY3QgcG9pbnRzXHJcbiAgICAgICAgICAgIHZhciBvYW0gPSBhLmFkZChvcmlnaW5Ub00pXHJcbiAgICAgICAgICAgIHZhciBvYm0gPSBiLmFkZChvcmlnaW5Ub00pXHJcbiAgICAgICAgICAgIHZhciBhcCA9IGEuYWRkKG9yaWdpblRvQSlcclxuICAgICAgICAgICAgdmFyIGJwID0gYi5hZGQob3JpZ2luVG9CKVxyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKClcclxuICAgICAgICAgICAgcGF0aChjdHgsIFthLCBiLCBicCwgb2JtLCBvYW0sIGFwXSlcclxuICAgICAgICAgICAgY3R4LmZpbGwoKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgX2ZvckVhY2hWaXNpYmxlRWRnZXMob3JpZ2luLCBib3VuZHMsIGYpIHtcclxuICAgICAgICB2YXIgYSA9IHRoaXMub3B0aW9ucy5wb2ludHNbdGhpcy5vcHRpb25zLnBvaW50cy5sZW5ndGggLSAxXSxcclxuICAgICAgICAgICAgYlxyXG4gICAgICAgIGZvciAodmFyIHAgPSAwLCBsID0gdGhpcy5vcHRpb25zLnBvaW50cy5sZW5ndGg7IHAgPCBsOyArK3AsIGEgPSBiKSB7XHJcbiAgICAgICAgICAgIGIgPSB0aGlzLm9wdGlvbnMucG9pbnRzW3BdXHJcbiAgICAgICAgICAgIGlmIChhLmluQm91bmQoYm91bmRzLnRvcGxlZnQsIGJvdW5kcy5ib3R0b21yaWdodCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmlnaW5Ub0EgPSBhLnN1YihvcmlnaW4pXHJcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luVG9CID0gYi5zdWIob3JpZ2luKVxyXG4gICAgICAgICAgICAgICAgdmFyIGFUb0IgPSBiLnN1YihhKVxyXG4gICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBWZWMyKGFUb0IueSwgLWFUb0IueClcclxuICAgICAgICAgICAgICAgIGlmIChub3JtYWwuZG90KG9yaWdpblRvQSkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZihhLCBiLCBvcmlnaW5Ub0EsIG9yaWdpblRvQiwgYVRvQilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9seWdvbk9iamVjdCIsImltcG9ydCBWZWMyIGZyb20gJy4vVmVjMi5qcydcclxuaW1wb3J0IFBvbHlnb25PYmplY3QgZnJvbSAnLi9Qb2x5Z29uT2JqZWN0LmpzJ1xyXG5cclxuY2xhc3MgUmVjdGFuZ2xlT2JqZWN0IGV4dGVuZHMgUG9seWdvbk9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgc3VwZXIob3B0aW9ucylcclxuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgdG9wbGVmdDogbmV3IFZlYzIoKSxcclxuICAgICAgICAgICAgYm90dG9tcmlnaHQ6IG5ldyBWZWMyKClcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgdGhpcy5vcHRpb25zKVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgICAgIHRoaXMuc3luY0Zyb21Ub3BsZWZ0Qm90dG9tcmlnaHQoKVxyXG4gICAgfVxyXG4gICAgc3luY0Zyb21Ub3BsZWZ0Qm90dG9tcmlnaHQoKSB7XHJcbiAgICAgICAgdmFyIGEgPSB0aGlzLm9wdGlvbnMudG9wbGVmdFxyXG4gICAgICAgIHZhciBiID0gbmV3IFZlYzIodGhpcy5vcHRpb25zLmJvdHRvbXJpZ2h0LngsIHRoaXMub3B0aW9ucy50b3BsZWZ0LnkpXHJcbiAgICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuYm90dG9tcmlnaHRcclxuICAgICAgICB2YXIgZCA9IG5ldyBWZWMyKHRoaXMub3B0aW9ucy50b3BsZWZ0LngsIHRoaXMub3B0aW9ucy5ib3R0b21yaWdodC55KVxyXG4gICAgICAgIHRoaXMub3B0aW9ucy5wb2ludHMgPSBbYSwgYiwgYywgZF1cclxuICAgIH1cclxuICAgIGZpbGwoY3R4KSB7XHJcbiAgICAgICAgdmFyIHggPSB0aGlzLm9wdGlvbnMucG9pbnRzWzBdLngsIHkgPSB0aGlzLm9wdGlvbnMucG9pbnRzWzBdLnlcclxuICAgICAgICBjdHgucmVjdCh4LCB5LCB0aGlzLm9wdGlvbnMucG9pbnRzWzJdLnggLSB4LCB0aGlzLm9wdGlvbnMucG9pbnRzWzJdLnkgLSB5KVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSZWN0YW5nbGVPYmplY3QiLCJpbXBvcnQgVmVjMiBmcm9tICcuL1ZlYzIuanMnXHJcbmltcG9ydCBMaWdodGluZyBmcm9tICcuL0xpZ2h0aW5nLmpzJ1xyXG5cclxuaW1wb3J0IExhbXAgZnJvbSAnLi9MYW1wLmpzJ1xyXG5cclxuaW1wb3J0IERpc2NPYmplY3QgZnJvbSAnLi9EaXNjT2JqZWN0LmpzJ1xyXG5pbXBvcnQgUmVjdGFuZ2xlT2JqZWN0IGZyb20gXCIuL1JlY3RhbmdsZU9iamVjdFwiXHJcblxyXG5cclxuLy8hU1RBZXhwb3J0IFJUXHJcbnZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjcmVlblwiKVxyXG52YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKVxyXG52YXIgbGlnaHQgPSBuZXcgTGFtcCh7XHJcbiAgICBwb3NpdGlvbjogbmV3IFZlYzIoMjAwLCAxNTApLFxyXG4gICAgZGlzdGFuY2U6IDIwMFxyXG59KVxyXG52YXIgZGlzYyA9IG5ldyBEaXNjT2JqZWN0KHtcclxuICAgIGNlbnRlcjogbmV3IFZlYzIoMTAwLCAxMDApLFxyXG4gICAgcmFkaXVzOiAzMFxyXG59KVxyXG52YXIgcmVjdCA9IG5ldyBSZWN0YW5nbGVPYmplY3Qoe1xyXG4gICAgdG9wbGVmdDogbmV3IFZlYzIoMjUwLCAyMDApLFxyXG4gICAgYm90dG9tcmlnaHQ6IG5ldyBWZWMyKDM1MCwgMjUwKVxyXG59KVxyXG5jb25zb2xlLmxvZyhcIlJFQ1RcIiwgcmVjdClcclxudmFyIGxpZ2h0aW5nID0gbmV3IExpZ2h0aW5nKHtcclxuICAgIGxpZ2h0OiBsaWdodCxcclxuICAgIG9iamVjdHM6IFtkaXNjLCByZWN0XVxyXG59KVxyXG5saWdodGluZy5jb21wdXRlKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuY3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIlxyXG5jdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG5saWdodGluZy5yZW5kZXIoY3R4KSJdLCJuYW1lcyI6WyJWZWMyIiwieCIsInkiLCJ0aGlzIiwidiIsIm4iLCJtdWwiLCJkeCIsImR5IiwibGVuZ3RoIiwiTWF0aCIsInNxcnQiLCJsZW5ndGgyIiwidG9wTGVmdCIsImJvdHRvbVJpZ2h0IiwiXzJQSSIsIlBJIiwicGF0aCIsImN0eCIsInBvaW50cyIsImRvbnRKb2luTGFzdCIsInAiLCJtb3ZlVG8iLCJpIiwibCIsImxpbmVUbyIsImNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dCIsImlkIiwidyIsImgiLCJjYW52YXMiLCJpaWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlRWxlbWVudCIsIndpZHRoIiwiaGVpZ2h0Iiwic3R5bGUiLCJkaXNwbGF5IiwiYm9keSIsImFwcGVuZENoaWxkIiwiZ2V0Q29udGV4dCIsImNsZWFyUmVjdCIsImdldFJHQkEiLCJjb2xvciIsImFscGhhIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJkIiwiZ2V0SW1hZ2VEYXRhIiwiZGF0YSIsImdldFRhbjIiLCJyYWRpdXMiLCJjZW50ZXIiLCJ5MCIsImxlbjIiLCJzb2xuIiwiZXBzaWxvbiIsInNvbHV0aW9ucyIsImEiLCJ4MCIsImFyZ3VtZW50cyIsImxlbjJhIiwidHQiLCJhY29zIiwibnQiLCJ0dF9jb3MiLCJjb3MiLCJ0dF9zaW4iLCJzaW4iLCJudF9jb3MiLCJudF9zaW4iLCJwdXNoIiwiZGlzdDAiLCJkaXN0MSIsImFicyIsImRpc3QyIiwiZGlzdDMiLCJMaWdodCIsIm9wdGlvbnMiLCJkZWZhdWx0cyIsIk9iamVjdCIsImFzc2lnbiIsImMiLCJfZ2V0VmlzaWJsZU1hc2tDYWNoZSIsImRyYXdJbWFnZSIsInJvdW5kIiwicG9zaXRpb24iLCJkaXN0YW5jZSIsImYiLCJmbG9vciIsImhhc2giLCJ2aXNtYXNraGFzaCIsIl92aXNtYXNrY2FjaGUiLCJnIiwiY3JlYXRlUmFkaWFsR3JhZGllbnQiLCJhZGRDb2xvclN0b3AiLCJkaWZmdXNlIiwidG9TdHJpbmciLCJMaWdodGluZyIsIl9jYWNoZSIsIl9jYXN0Y2FjaGUiLCJjdHhvdXRwdXQiLCJsaWdodCIsInNhbXBsZXMiLCJib3VuZHMiLCJvYmplY3RzIiwiZm9yRWFjaFNhbXBsZSIsIm8iLCJjb250YWlucyIsInRvcGxlZnQiLCJib3R0b21yaWdodCIsImZvckVhY2giLCJvYmplY3QiLCJjYXN0IiwidW5kZWZpbmVkIiwiYmVnaW5QYXRoIiwiZmlsbCIsImNyZWF0ZUNhY2hlIiwic2F2ZSIsInJlbmRlciIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsInJlc3RvcmUiLCJMYW1wIiwiX3RoaXMiLCJhbmdsZSIsInJvdWdobmVzcyIsIm9yaWVudGF0aW9uQ2VudGVyIiwiaGFzaGNvZGUiLCJfZ2V0SGFzaENhY2hlIiwiX2NhY2hlSGFzaGNvZGUiLCJfZ2NhY2hlIiwiRCIsImNhY2hlIiwibWluIiwiX2dldEdyYWRpZW50Q2FjaGUiLCJPcGFxdWVPYmplY3QiLCJ1bmlxdWVJZCIsIm9yaWdpbiIsInBvaW50IiwiRGlzY09iamVjdCIsIm0iLCJvcmlnaW5Ub00iLCJzdWIiLCJ0YW5nZW50TGluZXMiLCJvcmlnaW5Ub0EiLCJvcmlnaW5Ub0IiLCJhZGQiLCJiIiwibm9ybWFsaXplIiwib2FtIiwib2JtIiwiYXAiLCJicCIsInN0YXJ0IiwiYXRhbjIiLCJhcmMiLCJQb2x5Z29uT2JqZWN0IiwiY29weSIsImoiLCJvZGROb2RlcyIsIl9mb3JFYWNoVmlzaWJsZUVkZ2VzIiwiYVRvQiIsInQiLCJpbnYiLCJkb3QiLCJpbkJvdW5kIiwiUmVjdGFuZ2xlT2JqZWN0Iiwic3luY0Zyb21Ub3BsZWZ0Qm90dG9tcmlnaHQiLCJyZWN0IiwiZGlzYyIsImNvbnNvbGUiLCJsb2ciLCJsaWdodGluZyIsImNvbXB1dGUiXSwibWFwcGluZ3MiOiIycENBQU1BLHdCQUNVQyxFQUFHQyxrQkFDTkQsRUFBSUEsR0FBSyxPQUNUQyxFQUFJQSxHQUFLLGtEQUlQLElBQUlGLEVBQUtHLEtBQUtGLEVBQUdFLEtBQUtELCtCQUc3QkUsVUFDT0EsRUFBRUgsRUFBSUUsS0FBS0YsRUFBSUcsRUFBRUYsRUFBSUMsS0FBS0QsOEJBR2pDRSxVQUNPLElBQUlKLEVBQUtHLEtBQUtGLEVBQUlHLEVBQUVILEVBQUdFLEtBQUtELEVBQUlFLEVBQUVGLCtCQUd6Q0UsVUFDTyxJQUFJSixFQUFLRyxLQUFLRixFQUFJRyxFQUFFSCxFQUFHRSxLQUFLRCxFQUFJRSxFQUFFRiwrQkFHekNHLFVBQ08sSUFBSUwsRUFBS0csS0FBS0YsRUFBSUksRUFBR0YsS0FBS0QsRUFBSUcsd0NBSTlCRixLQUFLRyxLQUFLLGlDQUdmRixPQUNFRyxFQUFLSixLQUFLRixFQUFJRyxFQUFF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