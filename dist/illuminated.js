!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.illuminated={})}(this,function(t){"use strict";var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")},s=function(){function n(t,i){for(var o=0;o<i.length;o++){var n=i[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,i,o){return i&&n(t.prototype,i),o&&n(t,o),t}}(),i=function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)},a=function(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i},w=function(){function o(t,i){e(this,o),this.x=t||0,this.y=i||0}return s(o,[{key:"copy",value:function(){return new o(this.x,this.y)}},{key:"dot",value:function(t){return t.x*this.x+t.y*this.y}},{key:"sub",value:function(t){return new o(this.x-t.x,this.y-t.y)}},{key:"add",value:function(t){return new o(this.x+t.x,this.y+t.y)}},{key:"mul",value:function(t){return new o(this.x*t,this.y*t)}},{key:"inv",value:function(){return this.mul(-1)}},{key:"dist2",value:function(t){var i=this.x-t.x,o=this.y-t.y;return i*i+o*o}},{key:"normalize",value:function(){var t=Math.sqrt(this.length2());return new o(this.x/t,this.y/t)}},{key:"length2",value:function(){return this.x*this.x+this.y*this.y}},{key:"toString",value:function(){return this.x+","+this.y}},{key:"inBound",value:function(t,i){return t.x<this.x&&this.x<i.x&&t.y<this.y&&this.y<i.y}}]),o}(),o=(Math.PI,Math.sqrt(5),2*Math.PI);function v(t,i,o){var n=i[0];t.moveTo(n.x,n.y);for(var e=1,s=i.length;e<s;++e)n=i[e],t.lineTo(n.x,n.y);!o&&2<i.length&&(n=i[0],t.lineTo(n.x,n.y))}function r(t,i,o){var n="illujs_"+t,e=document.getElementById(n);null===e&&((e=document.createElement("canvas")).id=n,e.width=i,e.height=o,e.style.display="none",document.body.appendChild(e));var s=e.getContext("2d");return s.clearRect(0,0,e.width,e.height),e.width=i,e.height=o,{canvas:e,ctx:s,w:i,h:o}}var h=function(){var t=document.createElement("canvas");t.width=t.height=1;var n=t.getContext("2d");return function(t,i){n.clearRect(0,0,1,1),n.fillStyle=t,n.fillRect(0,0,1,1);var o=n.getImageData(0,0,1,1).data;return"rgba("+[o[0],o[1],o[2],i]+")"}}();function k(t,i){var o,n,e,s,a=k.epsilon||1e-6,r=[],h=t;"object"===(void 0===h?"undefined":x(h))&&"number"==typeof i&&(i=i=h);"number"==typeof i?e=(o=i)*o+(n=arguments[2])*n:(o=i.x,n=i.y,e=i.length2());var c=n*Math.sqrt(e-h*h),u=Math.acos((-h*o+c)/e),p=Math.acos((-h*o-c)/e),l=h*Math.cos(u),f=h*Math.sin(u),y=h*Math.cos(p),d=h*Math.sin(p);s=new w(o+y,n+d),r.push(s);var v=s.length2();s=new w(o+l,n-f),r.push(s);var g=s.length2();if(Math.abs(v-g)<a)return r;s=new w(o+y,n-d),r.push(s);var b=s.length2();if(Math.abs(g-b)<a)return[s,r[1]];if(Math.abs(v-b)<a)return[r[0],s];s=new w(o+l,n+f),r.push(s);var m=s.length2();return Math.abs(b-m)<a?[r[2],s]:Math.abs(g-m)<a?[r[1],s]:Math.abs(v-m)<a?[r[0],s]:r}var n=function(){function o(t){e(this,o);var i={position:new w,distance:100,diffuse:.8};this.options=Object.assign(i,t)}return s(o,[{key:"render",value:function(){}},{key:"mask",value:function(t){var i=this._getVisibleMaskCache();t.drawImage(i.canvas,Math.round(this.options.position.x-i.w/2),Math.round(this.options.position.y-i.h/2))}},{key:"bounds",value:function(){return{topleft:new w(this.options.position.x-this.options.distance,this.options.position.y-this.options.distance),bottomright:new w(this.options.position.x+this.options.distance,this.options.position.y+this.options.distance)}}},{key:"center",value:function(){return new w(this.options.distance,this.options.distance)}},{key:"forEachSample",value:function(t){t(this.options.position)}},{key:"_getVisibleMaskCache",value:function(){var t=Math.floor(1.4*this.options.distance),i=""+t;if(this.vismaskhash!=i){this.vismaskhash=i;var o=this._vismaskcache=r("vm"+this.id,2*t,2*t),n=o.ctx.createRadialGradient(t,t,0,t,t,t);n.addColorStop(0,"rgba(0,0,0,1)"),n.addColorStop(1,"rgba(0,0,0,0)"),o.ctx.fillStyle=n,o.ctx.fillRect(0,0,o.w,o.h)}return this._vismaskcache}},{key:"_getHashCache",value:function(){return[this.options.distance,this.options.diffuse].toString()}}]),o}(),c=function(){function o(t){e(this,o);var i={light:new n,objects:[]};this.options=Object.assign(i,this.options),this.options=Object.assign(this.options,t)}return s(o,[{key:"createCache",value:function(t,i){this._cache=r("lc",t,i),this._castcache=r("lcc",t,i)}},{key:"cast",value:function(t){var o=this.options.light,i=o.samples,n=this._castcache,e=n.ctx;e.clearRect(0,0,n.w,n.h),e.fillStyle="rgba(0,0,0,"+Math.round(100/i)/100+")";var s=o.bounds(),a=this.options.objects;o.forEachSample(function(i){for(var t=0,o=a.length;t<o;++t)if(a[t].contains(i))return void e.fillRect(s.topleft.x,s.topleft.y,s.bottomright.x-s.topleft.x,s.bottomright.y-s.topleft.y);a.forEach(function(t){t.cast(e,i,s)})}),a.forEach(function(t){var i=void 0===t.diffuse?.8:t.diffuse;i*=o.diffuse,e.fillStyle="rgba(0,0,0,"+(1-i)+")",e.beginPath(),t.path(e),e.fill()}),t.drawImage(n.canvas,0,0)}},{key:"compute",value:function(t,i){this._cache&&this._cache.w==t&&this._cache.h==i||this.createCache(t,i);var o=this._cache.ctx,n=this.options.light;o.save(),o.clearRect(0,0,o.canvas.width,o.canvas.height),n.render(o),o.globalCompositeOperation="destination-out",this.cast(o),o.restore()}},{key:"render",value:function(t){t.drawImage(this._cache.canvas,0,0)}},{key:"getCanvas",value:function(){return this._cache.canvas}}]),o}(),u=function(t){function o(t){e(this,o);var i=a(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return i.options=Object.assign({id:0,color:"rgba(250,220,150,0.8)",radius:0,samples:1,angle:0,roughness:0},i.options),i.options=Object.assign(i.options,t),i}return i(o,n),s(o,[{key:"_getHashCache",value:function(){return[this.options.color,this.options.distance,this.options.diffuse,this.options.angle,this.options.roughness,this.options.samples,this.options.radius].toString()}},{key:"center",value:function(){return new w((1-Math.cos(this.options.angle)*this.options.roughness)*this.options.distance,(1+Math.sin(this.options.angle)*this.options.roughness)*this.options.distance)}},{key:"bounds",value:function(){var t=new w(Math.cos(this.options.angle),-Math.sin(this.options.angle)).mul(this.options.roughness*this.options.distance);return{topleft:new w(this.options.position.x+t.x-this.options.distance,this.options.position.y+t.y-this.options.distance),bottomright:new w(this.options.position.x+t.x+this.options.distance,this.options.position.y+t.y+this.options.distance)}}},{key:"mask",value:function(t){var i=this._getVisibleMaskCache(),o=new w(Math.cos(this.options.angle),-Math.sin(this.options.angle)).mul(this.options.roughness*this.options.distance);t.drawImage(i.canvas,Math.round(this.options.position.x+o.x-i.w/2),Math.round(this.options.position.y+o.y-i.h/2))}},{key:"_getGradientCache",value:function(t){var i=this._getHashCache();if(this._cacheHashcode==i)return this._gcache;this._cacheHashcode=i;var o=Math.round(this.options.distance),n=2*o,e=r("gc"+this.id,n,n),s=e.ctx.createRadialGradient(t.x,t.y,0,o,o,o);return s.addColorStop(Math.min(1,this.options.radius/this.options.distance),this.options.color),s.addColorStop(1,h(this.options.color,0)),e.ctx.fillStyle=s,e.ctx.fillRect(0,0,e.w,e.h),this._gcache=e}},{key:"render",value:function(t){var i=this.center(),o=this._getGradientCache(i);t.drawImage(o.canvas,Math.round(this.options.position.x-i.x),Math.round(this.options.position.y-i.y))}}]),o}(),p=function(){function i(t){e(this,i);this.options=Object.assign({diffuse:.8},t),this.uniqueId=0}return s(i,[{key:"cast",value:function(){}},{key:"path",value:function(){}},{key:"bounds",value:function(){return{topleft:new w,bottomright:new w}}},{key:"contains",value:function(){return!1}}]),i}(),l=function(t){function n(t){e(this,n);var i=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),o={center:new w,radius:20};return i.options=Object.assign(o,i.options),i.options=Object.assign(i.options,t),i}return i(n,p),s(n,[{key:"cast",value:function(t,i,o){var n=this.options.center,e=n.sub(i),s=k(this.options.radius,e),a=s[0],r=s[1],h=a.add(i),c=r.add(i),u=(o.bottomright.x-o.topleft.x+(o.bottomright.y-o.topleft.y))/2;e=e.normalize().mul(u),a=a.normalize().mul(u),r=r.normalize().mul(u);var p=h.add(e),l=c.add(e),f=h.add(a),y=c.add(r),d=Math.atan2(e.x,-e.y);t.beginPath(),v(t,[c,y,l,p,f,h],!0),t.arc(n.x,n.y,this.options.radius,d,d+Math.PI),t.fill()}},{key:"path",value:function(t){t.arc(this.options.center.x,this.options.center.y,this.options.radius,0,o)}},{key:"bounds",value:function(){return{topleft:new w(this.options.center.x-this.options.radius,this.options.center.y-this.options.radius),bottomright:new w(this.options.center.x+this.options.radius,this.options.center.y+this.options.radius)}}},{key:"contains",value:function(t){return t.dist2(this.options.center)<this.options.radius*this.options.radius}}]),n}(),f=function(t){function o(t){e(this,o);var i=a(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return i.options=Object.assign({points:[]},i.options),i.options=Object.assign(i.options,t),i}return i(o,p),s(o,[{key:"bounds",value:function(){for(var t=this.options.points[0].copy(),i=t.copy(),o=1,n=this.options.points.length;o<n;++o){var e=this.options.points[o];e.x>i.x&&(i.x=e.x),e.y>i.y&&(i.y=e.y),e.x<t.x&&(t.x=e.x),e.y<t.y&&(t.y=e.y)}return{topleft:t,bottomright:i}}},{key:"contains",value:function(t){var i,o=this.options.points,n=o.length,e=n-1,s=t.x,a=t.y,r=!1;for(i=0;i<n;i++)(o[i].y<a&&o[e].y>=a||o[e].y<a&&o[i].y>=a)&&(o[i].x<=s||o[e].x<=s)&&o[i].x+(a-o[i].y)/(o[e].y-o[i].y)*(o[e].x-o[i].x)<s&&(r=!r),e=i;return r}},{key:"path",value:function(t){v(t,this.options.points)}},{key:"cast",value:function(p,l,t){var f=(t.bottomright.x-t.topleft.x+(t.bottomright.y-t.topleft.y))/2;this._forEachVisibleEdges(l,t,function(t,i,o,n,e){var s=o.inv().dot(e)/e.length2(),a=(s<0?t:1<s?i:t.add(e.mul(s))).sub(l);a=a.normalize().mul(f),o=o.normalize().mul(f),n=n.normalize().mul(f);var r=t.add(a),h=i.add(a),c=t.add(o),u=i.add(n);p.beginPath(),v(p,[t,i,u,h,r,c]),p.fill()})}},{key:"_forEachVisibleEdges",value:function(t,i,o){for(var n,e=this.options.points[this.options.points.length-1],s=0,a=this.options.points.length;s<a;++s,e=n)if(n=this.options.points[s],e.inBound(i.topleft,i.bottomright)){var r=e.sub(t),h=n.sub(t),c=n.sub(e);new w(c.y,-c.x).dot(r)<0&&o(e,n,r,h,c)}}}]),o}(),y=function(t){function n(t){e(this,n);var i=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t)),o={topleft:new w,bottomright:new w};return i.options=Object.assign(o,i.options),i.options=Object.assign(i.options,t),i.syncFromTopleftBottomright(),i}return i(n,f),s(n,[{key:"syncFromTopleftBottomright",value:function(){var t=this.options.topleft,i=new w(this.options.bottomright.x,this.options.topleft.y),o=this.options.bottomright,n=new w(this.options.topleft.x,this.options.bottomright.y);this.options.points=[t,i,o,n]}},{key:"fill",value:function(t){var i=this.options.points[0].x,o=this.options.points[0].y;t.rect(i,o,this.options.points[2].x-i,this.options.points[2].y-o)}}]),n}(),d=function(t){function n(t){e(this,n);var i=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t)),o={a:new w,b:new w};return i.options=Object.assign(o,i.options),i.options=Object.assign(i.options,t),i.syncFromAB(),i}return i(n,f),s(n,[{key:"syncFromAb",value:function(){this.options.points=[this.options.a,this.options.b]}}]),n}();t.Vec2=w,t.Lighting=c,t.Lamp=u,t.DiscObject=l,t.RectangleObject=y,t.LineObject=d,t.PolygonObject=f,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWxsdW1pbmF0ZWQuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9WZWMyLmpzIiwiLi4vc3JjL2hlbHBlcnMuanMiLCIuLi9zcmMvTGlnaHQuanMiLCIuLi9zcmMvTGlnaHRpbmcuanMiLCIuLi9zcmMvTGFtcC5qcyIsIi4uL3NyYy9PcGFxdWVPYmplY3QuanMiLCIuLi9zcmMvRGlzY09iamVjdC5qcyIsIi4uL3NyYy9Qb2x5Z29uT2JqZWN0LmpzIiwiLi4vc3JjL1JlY3RhbmdsZU9iamVjdC5qcyIsIi4uL3NyYy9MaW5lT2JqZWN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFZlYzIge1xyXG4gICAgY29uc3RydWN0b3IoeCwgeSkge1xyXG4gICAgICAgIHRoaXMueCA9IHggfHwgMFxyXG4gICAgICAgIHRoaXMueSA9IHkgfHwgMFxyXG4gICAgfVxyXG5cclxuICAgIGNvcHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMueCwgdGhpcy55KVxyXG4gICAgfVxyXG5cclxuICAgIGRvdCh2KSB7XHJcbiAgICAgICAgcmV0dXJuIHYueCAqIHRoaXMueCArIHYueSAqIHRoaXMueVxyXG4gICAgfVxyXG5cclxuICAgIHN1Yih2KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMueCAtIHYueCwgdGhpcy55IC0gdi55KVxyXG4gICAgfVxyXG5cclxuICAgIGFkZCh2KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMueCArIHYueCwgdGhpcy55ICsgdi55KVxyXG4gICAgfVxyXG5cclxuICAgIG11bChuKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMueCAqIG4sIHRoaXMueSAqIG4pXHJcbiAgICB9XHJcblxyXG4gICAgaW52KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm11bCgtMSlcclxuICAgIH1cclxuXHJcbiAgICBkaXN0Mih2KSB7XHJcbiAgICAgICAgbGV0IGR4ID0gdGhpcy54IC0gdi54XHJcbiAgICAgICAgbGV0IGR5ID0gdGhpcy55IC0gdi55XHJcbiAgICAgICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5XHJcbiAgICB9XHJcblxyXG4gICAgbm9ybWFsaXplKCkge1xyXG4gICAgICAgIGxldCBsZW5ndGggPSBNYXRoLnNxcnQodGhpcy5sZW5ndGgyKCkpXHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMueCAvIGxlbmd0aCwgdGhpcy55IC8gbGVuZ3RoKVxyXG4gICAgfVxyXG5cclxuICAgIGxlbmd0aDIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueVxyXG4gICAgfVxyXG5cclxuICAgIHRvU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnggKyAnLCcgKyB0aGlzLnlcclxuICAgIH1cclxuXHJcbiAgICBpbkJvdW5kKHRvcExlZnQsIGJvdHRvbVJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuICh0b3BMZWZ0LnggPCB0aGlzLnggJiYgdGhpcy54IDwgYm90dG9tUmlnaHQueCAmJlxyXG4gICAgICAgICAgICB0b3BMZWZ0LnkgPCB0aGlzLnkgJiYgdGhpcy55IDwgYm90dG9tUmlnaHQueSlcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVmVjMiIsImltcG9ydCBWZWMyIGZyb20gJy4vVmVjMi5qcydcclxuXHJcbmV4cG9ydCBjb25zdCBHT0xERU5fQU5HTEUgPSBNYXRoLlBJICogKDMgLSBNYXRoLnNxcnQoNSkpXHJcbmV4cG9ydCBjb25zdCBfMlBJID0gMiAqIE1hdGguUElcclxuXHJcbmZ1bmN0aW9uIHBhdGgoY3R4LCBwb2ludHMsIGRvbnRKb2luTGFzdCkge1xyXG4gICAgdmFyIHAgPSBwb2ludHNbMF1cclxuICAgIGN0eC5tb3ZlVG8ocC54LCBwLnkpXHJcbiAgICBmb3IgKHZhciBpID0gMSwgbCA9IHBvaW50cy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcclxuICAgICAgICBwID0gcG9pbnRzW2ldXHJcbiAgICAgICAgY3R4LmxpbmVUbyhwLngsIHAueSlcclxuICAgIH1cclxuICAgIGlmICghZG9udEpvaW5MYXN0ICYmIHBvaW50cy5sZW5ndGggPiAyKSB7XHJcbiAgICAgICAgcCA9IHBvaW50c1swXVxyXG4gICAgICAgIGN0eC5saW5lVG8ocC54LCBwLnkpXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dChpZCwgdywgaCkge1xyXG4gICAgdmFyIGlpZCA9ICdpbGx1anNfJyArIGlkXHJcbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWlkKVxyXG5cclxuICAgIGlmIChjYW52YXMgPT09IG51bGwpIHtcclxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxyXG4gICAgICAgIGNhbnZhcy5pZCA9IGlpZFxyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaFxyXG4gICAgICAgIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpXHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuXHJcbiAgICBjYW52YXMud2lkdGggPSB3XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gaFxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgY2FudmFzOiBjYW52YXMsXHJcbiAgICAgICAgY3R4OiBjdHgsXHJcbiAgICAgICAgdzogdyxcclxuICAgICAgICBoOiBoXHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBnZXRSR0JBID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vdmFyIGN0eCA9IGNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dCgnZ3JnYmEnLCAxLCAxKVxyXG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpXHJcbiAgICBjYW52YXMud2lkdGggPSBjYW52YXMuaGVpZ2h0ID0gMVxyXG4gICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjb2xvciwgYWxwaGEpIHtcclxuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIDEsIDEpXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yXHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIDEsIDEpXHJcbiAgICAgICAgdmFyIGQgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDEsIDEpLmRhdGFcclxuICAgICAgICByZXR1cm4gJ3JnYmEoJyArIFtkWzBdLCBkWzFdLCBkWzJdLCBhbHBoYV0gKyAnKSdcclxuICAgIH1cclxufSgpKVxyXG5cclxuZnVuY3Rpb24gZ2V0VGFuMihyYWRpdXMsIGNlbnRlcikge1xyXG4gICAgdmFyIGVwc2lsb24gPSBnZXRUYW4yLmVwc2lsb24gfHwgMWUtNiwgLy8gY29uc3RhbnRcclxuICAgICAgICB4MCwgeTAsIGxlbjIsIHNvbG4sXHJcbiAgICAgICAgc29sdXRpb25zID0gW10sXHJcbiAgICAgICAgYSA9IHJhZGl1c1xyXG4gICAgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgY2VudGVyID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgIHZhciB0bXAgPSBhXHJcbiAgICAgICAgY2VudGVyID0gYVxyXG4gICAgICAgIGNlbnRlciA9IHRtcCAvLyBzd2FwXHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNlbnRlciA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAvLyBnZXRUYW4yKHJhZGl1czpudW1iZXIsIHgwOm51bWJlciwgeTA6bnVtYmVyKVxyXG4gICAgICAgIHgwID0gY2VudGVyXHJcbiAgICAgICAgeTAgPSBhcmd1bWVudHNbMl1cclxuICAgICAgICBsZW4yID0geDAgKiB4MCArIHkwICogeTBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gZ2V0VGFuczIocmFkaXVzOm51bWJlciwgY2VudGVyOm9iamVjdD17eDp4MCx5OnkwfSlcclxuICAgICAgICB4MCA9IGNlbnRlci54XHJcbiAgICAgICAgeTAgPSBjZW50ZXIueVxyXG4gICAgICAgIGxlbjIgPSBjZW50ZXIubGVuZ3RoMigpXHJcbiAgICB9XHJcbiAgICAvLyB0ID0gKy8tIE1hdGguYWNvcyggKC1hKngwICsvLSB5MCAqIE1hdGguc3FydCh4MCp4MCArIHkwKnkwIC0gYSphKSkvKHgwKngwICsgeTAqeSkgKVxyXG4gICAgdmFyIGxlbjJhID0geTAgKiBNYXRoLnNxcnQobGVuMiAtIGEgKiBhKSxcclxuICAgICAgICB0dCA9IE1hdGguYWNvcygoLWEgKiB4MCArIGxlbjJhKSAvIGxlbjIpLFxyXG4gICAgICAgIG50ID0gTWF0aC5hY29zKCgtYSAqIHgwIC0gbGVuMmEpIC8gbGVuMiksXHJcbiAgICAgICAgdHRfY29zID0gYSAqIE1hdGguY29zKHR0KSxcclxuICAgICAgICB0dF9zaW4gPSBhICogTWF0aC5zaW4odHQpLFxyXG4gICAgICAgIG50X2NvcyA9IGEgKiBNYXRoLmNvcyhudCksXHJcbiAgICAgICAgbnRfc2luID0gYSAqIE1hdGguc2luKG50KVxyXG5cclxuICAgIC8vIE5vdGU6IGNvcygtdCkgPT0gY29zKHQpIGFuZCBzaW4oLXQpID09IC1zaW4odCkgZm9yIGFsbCB0LCBzbyBmaW5kXHJcbiAgICAvLyB4MCArIGEqY29zKHQpLCB5MCArLy0gYSpzaW4odClcclxuICAgIC8vIFNvbHV0aW9ucyBoYXZlIGVxdWFsIGxlbmd0aHNcclxuICAgIHNvbG4gPSBuZXcgVmVjMih4MCArIG50X2NvcywgeTAgKyBudF9zaW4pXHJcbiAgICBzb2x1dGlvbnMucHVzaChzb2xuKVxyXG4gICAgdmFyIGRpc3QwID0gc29sbi5sZW5ndGgyKClcclxuXHJcbiAgICBzb2xuID0gbmV3IFZlYzIoeDAgKyB0dF9jb3MsIHkwIC0gdHRfc2luKVxyXG4gICAgc29sdXRpb25zLnB1c2goc29sbilcclxuICAgIHZhciBkaXN0MSA9IHNvbG4ubGVuZ3RoMigpXHJcbiAgICBpZiAoTWF0aC5hYnMoZGlzdDAgLSBkaXN0MSkgPCBlcHNpbG9uKSByZXR1cm4gc29sdXRpb25zXHJcblxyXG4gICAgc29sbiA9IG5ldyBWZWMyKHgwICsgbnRfY29zLCB5MCAtIG50X3NpbilcclxuICAgIHNvbHV0aW9ucy5wdXNoKHNvbG4pXHJcbiAgICB2YXIgZGlzdDIgPSBzb2xuLmxlbmd0aDIoKVxyXG4gICAgLy8gQ2hhbmdlZCBvcmRlciBzbyBubyBzdHJhbmdlIFggb2YgbGlnaHQgaW5zaWRlIHRoZSBjaXJjbGUuIENvdWxkIGFsc28gc29ydCByZXN1bHRzLlxyXG4gICAgaWYgKE1hdGguYWJzKGRpc3QxIC0gZGlzdDIpIDwgZXBzaWxvbikgcmV0dXJuIFtzb2xuLCBzb2x1dGlvbnNbMV1dXHJcbiAgICBpZiAoTWF0aC5hYnMoZGlzdDAgLSBkaXN0MikgPCBlcHNpbG9uKSByZXR1cm4gW3NvbHV0aW9uc1swXSwgc29sbl1cclxuXHJcbiAgICBzb2xuID0gbmV3IFZlYzIoeDAgKyB0dF9jb3MsIHkwICsgdHRfc2luKVxyXG4gICAgc29sdXRpb25zLnB1c2goc29sbilcclxuICAgIHZhciBkaXN0MyA9IHNvbG4ubGVuZ3RoMigpXHJcbiAgICBpZiAoTWF0aC5hYnMoZGlzdDIgLSBkaXN0MykgPCBlcHNpbG9uKSByZXR1cm4gW3NvbHV0aW9uc1syXSwgc29sbl1cclxuICAgIGlmIChNYXRoLmFicyhkaXN0MSAtIGRpc3QzKSA8IGVwc2lsb24pIHJldHVybiBbc29sdXRpb25zWzFdLCBzb2xuXVxyXG4gICAgaWYgKE1hdGguYWJzKGRpc3QwIC0gZGlzdDMpIDwgZXBzaWxvbikgcmV0dXJuIFtzb2x1dGlvbnNbMF0sIHNvbG5dXHJcblxyXG4gICAgLy8gcmV0dXJuIGFsbCA0IHNvbHV0aW9ucyBpZiBubyBtYXRjaGluZyB2ZWN0b3IgbGVuZ3RocyBmb3VuZC5cclxuICAgIHJldHVybiBzb2x1dGlvbnNcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICAgIGNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dCxcclxuICAgIGdldFJHQkEsXHJcbiAgICBnZXRUYW4yLFxyXG4gICAgcGF0aFxyXG59IiwiaW1wb3J0IFZlYzIgZnJvbSAnLi9WZWMyLmpzJ1xyXG5pbXBvcnQgeyBjcmVhdGVDYW52YXNBbmQyZENvbnRleHQgfSBmcm9tICcuL2hlbHBlcnMuanMnXHJcblxyXG5jbGFzcyBMaWdodCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjMigpLFxyXG4gICAgICAgICAgICBkaXN0YW5jZTogMTAwLFxyXG4gICAgICAgICAgICBkaWZmdXNlOiAwLjhcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgb3B0aW9ucylcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7fVxyXG5cclxuICAgIG1hc2soY3R4KSB7XHJcbiAgICAgICAgdmFyIGMgPSB0aGlzLl9nZXRWaXNpYmxlTWFza0NhY2hlKClcclxuICAgICAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICAgICAgICBjLmNhbnZhcyxcclxuICAgICAgICAgICAgTWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMucG9zaXRpb24ueCAtIGMudyAvIDIpLFxyXG4gICAgICAgICAgICBNYXRoLnJvdW5kKHRoaXMub3B0aW9ucy5wb3NpdGlvbi55IC0gYy5oIC8gMilcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgYm91bmRzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcGxlZnQ6IG5ldyBWZWMyKHRoaXMub3B0aW9ucy5wb3NpdGlvbi54IC0gdGhpcy5vcHRpb25zLmRpc3RhbmNlLCB0aGlzLm9wdGlvbnMucG9zaXRpb24ueSAtIHRoaXMub3B0aW9ucy5kaXN0YW5jZSksXHJcbiAgICAgICAgICAgIGJvdHRvbXJpZ2h0OiBuZXcgVmVjMih0aGlzLm9wdGlvbnMucG9zaXRpb24ueCArIHRoaXMub3B0aW9ucy5kaXN0YW5jZSwgdGhpcy5vcHRpb25zLnBvc2l0aW9uLnkgKyB0aGlzLm9wdGlvbnMuZGlzdGFuY2UpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNlbnRlcigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy5vcHRpb25zLmRpc3RhbmNlLCB0aGlzLm9wdGlvbnMuZGlzdGFuY2UpXHJcbiAgICB9XHJcblxyXG4gICAgZm9yRWFjaFNhbXBsZShmKSB7XHJcbiAgICAgICAgZih0aGlzLm9wdGlvbnMucG9zaXRpb24pXHJcbiAgICB9XHJcblxyXG4gICAgX2dldFZpc2libGVNYXNrQ2FjaGUoKSB7XHJcbiAgICAgICAgdmFyIGQgPSBNYXRoLmZsb29yKHRoaXMub3B0aW9ucy5kaXN0YW5jZSAqIDEuNClcclxuICAgICAgICB2YXIgaGFzaCA9ICcnICsgZFxyXG4gICAgICAgIGlmICh0aGlzLnZpc21hc2toYXNoICE9IGhhc2gpIHtcclxuICAgICAgICAgICAgdGhpcy52aXNtYXNraGFzaCA9IGhhc2hcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLl92aXNtYXNrY2FjaGUgPSBjcmVhdGVDYW52YXNBbmQyZENvbnRleHQoJ3ZtJyArIHRoaXMuaWQsIDIgKiBkLCAyICogZClcclxuICAgICAgICAgICAgdmFyIGcgPSBjLmN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudChkLCBkLCAwLCBkLCBkLCBkKVxyXG4gICAgICAgICAgICBnLmFkZENvbG9yU3RvcCgwLCAncmdiYSgwLDAsMCwxKScpXHJcbiAgICAgICAgICAgIGcuYWRkQ29sb3JTdG9wKDEsICdyZ2JhKDAsMCwwLDApJylcclxuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gZ1xyXG4gICAgICAgICAgICBjLmN0eC5maWxsUmVjdCgwLCAwLCBjLncsIGMuaClcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Zpc21hc2tjYWNoZVxyXG4gICAgfVxyXG5cclxuICAgIF9nZXRIYXNoQ2FjaGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFt0aGlzLm9wdGlvbnMuZGlzdGFuY2UsIHRoaXMub3B0aW9ucy5kaWZmdXNlXS50b1N0cmluZygpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExpZ2h0IiwiaW1wb3J0IHsgY3JlYXRlQ2FudmFzQW5kMmRDb250ZXh0IH0gZnJvbSAnLi9oZWxwZXJzLmpzJ1xyXG5pbXBvcnQgTGlnaHQgZnJvbSAnLi9MaWdodC5qcydcclxuXHJcbmNsYXNzIExpZ2h0aW5nIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgbGlnaHQ6IG5ldyBMaWdodCgpLFxyXG4gICAgICAgICAgICBvYmplY3RzOiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRzLCB0aGlzLm9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ2FjaGUodywgaCkge1xyXG4gICAgICAgIHRoaXMuX2NhY2hlID0gY3JlYXRlQ2FudmFzQW5kMmRDb250ZXh0KCdsYycsIHcsIGgpXHJcbiAgICAgICAgdGhpcy5fY2FzdGNhY2hlID0gY3JlYXRlQ2FudmFzQW5kMmRDb250ZXh0KCdsY2MnLCB3LCBoKVxyXG4gICAgfVxyXG5cclxuICAgIGNhc3QoY3R4b3V0cHV0KSB7XHJcbiAgICAgICAgdmFyIGxpZ2h0ID0gdGhpcy5vcHRpb25zLmxpZ2h0XHJcbiAgICAgICAgdmFyIG4gPSBsaWdodC5zYW1wbGVzXHJcbiAgICAgICAgdmFyIGMgPSB0aGlzLl9jYXN0Y2FjaGVcclxuICAgICAgICB2YXIgY3R4ID0gYy5jdHhcclxuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGMudywgYy5oKVxyXG4gICAgICAgIC8vIERyYXcgc2hhZG93cyBmb3IgZWFjaCBsaWdodCBzYW1wbGUgYW5kIG9iamVjdHNcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsJyArIE1hdGgucm91bmQoMTAwIC8gbikgLyAxMDAgKyAnKScgLy8gSXMgdGhlcmUgYW55IGJldHRlciB3YXk/XHJcbiAgICAgICAgdmFyIGJvdW5kcyA9IGxpZ2h0LmJvdW5kcygpXHJcbiAgICAgICAgdmFyIG9iamVjdHMgPSB0aGlzLm9wdGlvbnMub2JqZWN0c1xyXG4gICAgICAgIGxpZ2h0LmZvckVhY2hTYW1wbGUoZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIG8gPSAwLCBsID0gb2JqZWN0cy5sZW5ndGg7IG8gPCBsOyArK28pIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3RzW29dLmNvbnRhaW5zKHBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdChib3VuZHMudG9wbGVmdC54LCBib3VuZHMudG9wbGVmdC55LCBib3VuZHMuYm90dG9tcmlnaHQueCAtIGJvdW5kcy50b3BsZWZ0LngsIGJvdW5kcy5ib3R0b21yaWdodC55IC0gYm91bmRzLnRvcGxlZnQueSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0LmNhc3QoY3R4LCBwb3NpdGlvbiwgYm91bmRzKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gRHJhdyBvYmplY3RzIGRpZmZ1c2UgLSB0aGUgaW50ZW5zaXR5IG9mIHRoZSBsaWdodCBwZW5ldHJhdGlvbiBpbiBvYmplY3RzXHJcbiAgICAgICAgb2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChvYmplY3QpIHtcclxuICAgICAgICAgICAgdmFyIGRpZmZ1c2UgPSBvYmplY3QuZGlmZnVzZSA9PT0gdW5kZWZpbmVkID8gMC44IDogb2JqZWN0LmRpZmZ1c2VcclxuICAgICAgICAgICAgZGlmZnVzZSAqPSBsaWdodC5kaWZmdXNlXHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLDAsMCwnICsgKDEgLSBkaWZmdXNlKSArICcpJ1xyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKClcclxuICAgICAgICAgICAgb2JqZWN0LnBhdGgoY3R4KVxyXG4gICAgICAgICAgICBjdHguZmlsbCgpXHJcbiAgICAgICAgfSlcclxuICAgICAgICBjdHhvdXRwdXQuZHJhd0ltYWdlKGMuY2FudmFzLCAwLCAwKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbXB1dGUodywgaCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fY2FjaGUgfHwgdGhpcy5fY2FjaGUudyAhPSB3IHx8IHRoaXMuX2NhY2hlLmggIT0gaClcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVDYWNoZSh3LCBoKVxyXG4gICAgICAgIHZhciBjdHggPSB0aGlzLl9jYWNoZS5jdHhcclxuICAgICAgICB2YXIgbGlnaHQgPSB0aGlzLm9wdGlvbnMubGlnaHRcclxuICAgICAgICBjdHguc2F2ZSgpXHJcbiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodClcclxuXHJcbiAgICAgICAgbGlnaHQucmVuZGVyKGN0eClcclxuICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2Rlc3RpbmF0aW9uLW91dCdcclxuICAgICAgICB0aGlzLmNhc3QoY3R4KVxyXG4gICAgICAgIGN0eC5yZXN0b3JlKClcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoY3R4KSB7XHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLl9jYWNoZS5jYW52YXMsIDAsIDApXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FudmFzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZS5jYW52YXNcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTGlnaHRpbmciLCJpbXBvcnQgVmVjMiBmcm9tICcuL1ZlYzInXHJcbmltcG9ydCBMaWdodCBmcm9tICcuL0xpZ2h0LmpzJ1xyXG5pbXBvcnQgeyBjcmVhdGVDYW52YXNBbmQyZENvbnRleHQsIGdldFJHQkEgfSBmcm9tICcuL2hlbHBlcnMuanMnXHJcblxyXG5jbGFzcyBMYW1wIGV4dGVuZHMgTGlnaHQge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgaWQ6IDAsXHJcbiAgICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTAsMjIwLDE1MCwwLjgpJyxcclxuICAgICAgICAgICAgcmFkaXVzOiAwLFxyXG4gICAgICAgICAgICBzYW1wbGVzOiAxLFxyXG4gICAgICAgICAgICBhbmdsZTogMCxcclxuICAgICAgICAgICAgcm91Z2huZXNzOiAwXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oZGVmYXVsdHMsIHRoaXMub3B0aW9ucylcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SGFzaENhY2hlKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jb2xvcixcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRpc3RhbmNlLFxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGlmZnVzZSxcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFuZ2xlLFxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucm91Z2huZXNzLFxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuc2FtcGxlcyxcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJhZGl1c1xyXG4gICAgICAgIF0udG9TdHJpbmcoKVxyXG4gICAgfVxyXG5cclxuICAgIGNlbnRlcigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoXHJcbiAgICAgICAgICAgICgxIC0gTWF0aC5jb3ModGhpcy5vcHRpb25zLmFuZ2xlKSAqIHRoaXMub3B0aW9ucy5yb3VnaG5lc3MpICogdGhpcy5vcHRpb25zLmRpc3RhbmNlLFxyXG4gICAgICAgICAgICAoMSArIE1hdGguc2luKHRoaXMub3B0aW9ucy5hbmdsZSkgKiB0aGlzLm9wdGlvbnMucm91Z2huZXNzKSAqIHRoaXMub3B0aW9ucy5kaXN0YW5jZVxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBib3VuZHMoKSB7XHJcbiAgICAgICAgdmFyIG9yaWVudGF0aW9uQ2VudGVyID0gbmV3IFZlYzIoXHJcbiAgICAgICAgICAgIE1hdGguY29zKHRoaXMub3B0aW9ucy5hbmdsZSksIC1NYXRoLnNpbih0aGlzLm9wdGlvbnMuYW5nbGUpXHJcbiAgICAgICAgKS5tdWwodGhpcy5vcHRpb25zLnJvdWdobmVzcyAqIHRoaXMub3B0aW9ucy5kaXN0YW5jZSlcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b3BsZWZ0OiBuZXcgVmVjMihcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5wb3NpdGlvbi54ICsgb3JpZW50YXRpb25DZW50ZXIueCAtIHRoaXMub3B0aW9ucy5kaXN0YW5jZSxcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5wb3NpdGlvbi55ICsgb3JpZW50YXRpb25DZW50ZXIueSAtIHRoaXMub3B0aW9ucy5kaXN0YW5jZVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBib3R0b21yaWdodDogbmV3IFZlYzIoXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMucG9zaXRpb24ueCArIG9yaWVudGF0aW9uQ2VudGVyLnggKyB0aGlzLm9wdGlvbnMuZGlzdGFuY2UsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMucG9zaXRpb24ueSArIG9yaWVudGF0aW9uQ2VudGVyLnkgKyB0aGlzLm9wdGlvbnMuZGlzdGFuY2VcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtYXNrKGN0eCkge1xyXG4gICAgICAgIHZhciBjID0gdGhpcy5fZ2V0VmlzaWJsZU1hc2tDYWNoZSgpXHJcbiAgICAgICAgdmFyIG9yaWVudGF0aW9uQ2VudGVyID0gbmV3IFZlYzIoXHJcbiAgICAgICAgICAgIE1hdGguY29zKHRoaXMub3B0aW9ucy5hbmdsZSksIC1NYXRoLnNpbih0aGlzLm9wdGlvbnMuYW5nbGUpXHJcbiAgICAgICAgKS5tdWwodGhpcy5vcHRpb25zLnJvdWdobmVzcyAqIHRoaXMub3B0aW9ucy5kaXN0YW5jZSlcclxuICAgICAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICAgICAgICBjLmNhbnZhcywgTWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMucG9zaXRpb24ueCArIG9yaWVudGF0aW9uQ2VudGVyLnggLSBjLncgLyAyKSxcclxuICAgICAgICAgICAgTWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMucG9zaXRpb24ueSArIG9yaWVudGF0aW9uQ2VudGVyLnkgLSBjLmggLyAyKVxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0R3JhZGllbnRDYWNoZShjZW50ZXIpIHtcclxuICAgICAgICB2YXIgaGFzaGNvZGUgPSB0aGlzLl9nZXRIYXNoQ2FjaGUoKVxyXG4gICAgICAgIGlmICh0aGlzLl9jYWNoZUhhc2hjb2RlID09IGhhc2hjb2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nY2FjaGVcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY2FjaGVIYXNoY29kZSA9IGhhc2hjb2RlXHJcbiAgICAgICAgdmFyIGQgPSBNYXRoLnJvdW5kKHRoaXMub3B0aW9ucy5kaXN0YW5jZSlcclxuICAgICAgICB2YXIgRCA9IGQgKiAyXHJcbiAgICAgICAgdmFyIGNhY2hlID0gY3JlYXRlQ2FudmFzQW5kMmRDb250ZXh0KCdnYycgKyB0aGlzLmlkLCBELCBEKVxyXG4gICAgICAgIHZhciBnID0gY2FjaGUuY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KGNlbnRlci54LCBjZW50ZXIueSwgMCwgZCwgZCwgZClcclxuICAgICAgICBnLmFkZENvbG9yU3RvcChNYXRoLm1pbigxLCB0aGlzLm9wdGlvbnMucmFkaXVzIC8gdGhpcy5vcHRpb25zLmRpc3RhbmNlKSwgdGhpcy5vcHRpb25zLmNvbG9yKVxyXG4gICAgICAgIGcuYWRkQ29sb3JTdG9wKDEsIGdldFJHQkEodGhpcy5vcHRpb25zLmNvbG9yLCAwKSlcclxuICAgICAgICBjYWNoZS5jdHguZmlsbFN0eWxlID0gZ1xyXG4gICAgICAgIGNhY2hlLmN0eC5maWxsUmVjdCgwLCAwLCBjYWNoZS53LCBjYWNoZS5oKVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9nY2FjaGUgPSBjYWNoZVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcihjdHgpIHtcclxuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy5jZW50ZXIoKVxyXG4gICAgICAgIHZhciBjID0gdGhpcy5fZ2V0R3JhZGllbnRDYWNoZShjZW50ZXIpXHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZShcclxuICAgICAgICAgICAgYy5jYW52YXMsXHJcbiAgICAgICAgICAgIE1hdGgucm91bmQodGhpcy5vcHRpb25zLnBvc2l0aW9uLnggLSBjZW50ZXIueCksXHJcbiAgICAgICAgICAgIE1hdGgucm91bmQodGhpcy5vcHRpb25zLnBvc2l0aW9uLnkgLSBjZW50ZXIueSlcclxuICAgICAgICApXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExhbXAiLCJpbXBvcnQgVmVjMiBmcm9tICcuL1ZlYzIuanMnXHJcblxyXG5jbGFzcyBPcGFxdWVPYmplY3Qge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICBkaWZmdXNlOiAwLjhcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgb3B0aW9ucylcclxuICAgICAgICB0aGlzLnVuaXF1ZUlkID0gMFxyXG4gICAgfVxyXG5cclxuICAgIGNhc3QoKSB7fVxyXG5cclxuICAgIHBhdGgoKSB7fVxyXG5cclxuICAgIGJvdW5kcygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b3BsZWZ0OiBuZXcgVmVjMigpLFxyXG4gICAgICAgICAgICBib3R0b21yaWdodDogbmV3IFZlYzIoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb250YWlucygpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgT3BhcXVlT2JqZWN0IiwiaW1wb3J0IFZlYzIgZnJvbSAnLi9WZWMyLmpzJ1xyXG5pbXBvcnQgeyBnZXRUYW4yLCBwYXRoLCBfMlBJIH0gZnJvbSAnLi9oZWxwZXJzLmpzJ1xyXG5pbXBvcnQgT3BhcXVlT2JqZWN0IGZyb20gJy4vT3BhcXVlT2JqZWN0LmpzJ1xyXG5cclxuY2xhc3MgRGlzY09iamVjdCBleHRlbmRzIE9wYXF1ZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgc3VwZXIoKVxyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICBjZW50ZXI6IG5ldyBWZWMyKCksXHJcbiAgICAgICAgICAgIHJhZGl1czogMjBcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgdGhpcy5vcHRpb25zKVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgfVxyXG4gICAgY2FzdChjdHgsIG9yaWdpbiwgYm91bmRzKSB7XHJcbiAgICAgICAgdmFyIG0gPSB0aGlzLm9wdGlvbnMuY2VudGVyXHJcbiAgICAgICAgdmFyIG9yaWdpblRvTSA9IG0uc3ViKG9yaWdpbilcclxuICAgICAgICB2YXIgdGFuZ2VudExpbmVzID0gZ2V0VGFuMih0aGlzLm9wdGlvbnMucmFkaXVzLCBvcmlnaW5Ub00pXHJcbiAgICAgICAgdmFyIG9yaWdpblRvQSA9IHRhbmdlbnRMaW5lc1swXVxyXG4gICAgICAgIHZhciBvcmlnaW5Ub0IgPSB0YW5nZW50TGluZXNbMV1cclxuICAgICAgICB2YXIgYSA9IG9yaWdpblRvQS5hZGQob3JpZ2luKVxyXG4gICAgICAgIHZhciBiID0gb3JpZ2luVG9CLmFkZChvcmlnaW4pXHJcbiAgICAgICAgLy8gbm9ybWFsaXplIHRvIGRpc3RhbmNlXHJcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gKChib3VuZHMuYm90dG9tcmlnaHQueCAtIGJvdW5kcy50b3BsZWZ0LngpICsgKGJvdW5kcy5ib3R0b21yaWdodC55IC0gYm91bmRzLnRvcGxlZnQueSkpIC8gMlxyXG4gICAgICAgIG9yaWdpblRvTSA9IG9yaWdpblRvTS5ub3JtYWxpemUoKS5tdWwoZGlzdGFuY2UpXHJcbiAgICAgICAgb3JpZ2luVG9BID0gb3JpZ2luVG9BLm5vcm1hbGl6ZSgpLm11bChkaXN0YW5jZSlcclxuICAgICAgICBvcmlnaW5Ub0IgPSBvcmlnaW5Ub0Iubm9ybWFsaXplKCkubXVsKGRpc3RhbmNlKVxyXG4gICAgICAgIC8vIHByb2plY3QgcG9pbnRzXHJcbiAgICAgICAgdmFyIG9hbSA9IGEuYWRkKG9yaWdpblRvTSlcclxuICAgICAgICB2YXIgb2JtID0gYi5hZGQob3JpZ2luVG9NKVxyXG4gICAgICAgIHZhciBhcCA9IGEuYWRkKG9yaWdpblRvQSlcclxuICAgICAgICB2YXIgYnAgPSBiLmFkZChvcmlnaW5Ub0IpXHJcbiAgICAgICAgdmFyIHN0YXJ0ID0gTWF0aC5hdGFuMihvcmlnaW5Ub00ueCwgLW9yaWdpblRvTS55KVxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKVxyXG4gICAgICAgIHBhdGgoY3R4LCBbYiwgYnAsIG9ibSwgb2FtLCBhcCwgYV0sIHRydWUpXHJcbiAgICAgICAgY3R4LmFyYyhtLngsIG0ueSwgdGhpcy5vcHRpb25zLnJhZGl1cywgc3RhcnQsIHN0YXJ0ICsgTWF0aC5QSSlcclxuICAgICAgICBjdHguZmlsbCgpXHJcbiAgICB9XHJcbiAgICBwYXRoKGN0eCkge1xyXG4gICAgICAgIGN0eC5hcmModGhpcy5vcHRpb25zLmNlbnRlci54LCB0aGlzLm9wdGlvbnMuY2VudGVyLnksIHRoaXMub3B0aW9ucy5yYWRpdXMsIDAsIF8yUEkpXHJcbiAgICB9XHJcbiAgICBib3VuZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG9wbGVmdDogbmV3IFZlYzIodGhpcy5vcHRpb25zLmNlbnRlci54IC0gdGhpcy5vcHRpb25zLnJhZGl1cywgdGhpcy5vcHRpb25zLmNlbnRlci55IC0gdGhpcy5vcHRpb25zLnJhZGl1cyksXHJcbiAgICAgICAgICAgIGJvdHRvbXJpZ2h0OiBuZXcgVmVjMih0aGlzLm9wdGlvbnMuY2VudGVyLnggKyB0aGlzLm9wdGlvbnMucmFkaXVzLCB0aGlzLm9wdGlvbnMuY2VudGVyLnkgKyB0aGlzLm9wdGlvbnMucmFkaXVzKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnRhaW5zKHBvaW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHBvaW50LmRpc3QyKHRoaXMub3B0aW9ucy5jZW50ZXIpIDwgdGhpcy5vcHRpb25zLnJhZGl1cyAqIHRoaXMub3B0aW9ucy5yYWRpdXNcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRGlzY09iamVjdCIsImltcG9ydCBWZWMyIGZyb20gJy4vVmVjMi5qcydcclxuaW1wb3J0IHsgcGF0aCB9IGZyb20gJy4vaGVscGVycy5qcydcclxuaW1wb3J0IE9wYXF1ZU9iamVjdCBmcm9tICcuL09wYXF1ZU9iamVjdC5qcydcclxuXHJcbmNsYXNzIFBvbHlnb25PYmplY3QgZXh0ZW5kcyBPcGFxdWVPYmplY3Qge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgcG9pbnRzOiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRzLCB0aGlzLm9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXHJcbiAgICB9XHJcblxyXG4gICAgYm91bmRzKCkge1xyXG4gICAgICAgIHZhciB0b3BsZWZ0ID0gdGhpcy5vcHRpb25zLnBvaW50c1swXS5jb3B5KClcclxuICAgICAgICB2YXIgYm90dG9tcmlnaHQgPSB0b3BsZWZ0LmNvcHkoKVxyXG4gICAgICAgIGZvciAodmFyIHAgPSAxLCBsID0gdGhpcy5vcHRpb25zLnBvaW50cy5sZW5ndGg7IHAgPCBsOyArK3ApIHtcclxuICAgICAgICAgICAgdmFyIHBvaW50ID0gdGhpcy5vcHRpb25zLnBvaW50c1twXVxyXG4gICAgICAgICAgICBpZiAocG9pbnQueCA+IGJvdHRvbXJpZ2h0LngpXHJcbiAgICAgICAgICAgICAgICBib3R0b21yaWdodC54ID0gcG9pbnQueFxyXG4gICAgICAgICAgICBpZiAocG9pbnQueSA+IGJvdHRvbXJpZ2h0LnkpXHJcbiAgICAgICAgICAgICAgICBib3R0b21yaWdodC55ID0gcG9pbnQueVxyXG4gICAgICAgICAgICBpZiAocG9pbnQueCA8IHRvcGxlZnQueClcclxuICAgICAgICAgICAgICAgIHRvcGxlZnQueCA9IHBvaW50LnhcclxuICAgICAgICAgICAgaWYgKHBvaW50LnkgPCB0b3BsZWZ0LnkpXHJcbiAgICAgICAgICAgICAgICB0b3BsZWZ0LnkgPSBwb2ludC55XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcGxlZnQ6IHRvcGxlZnQsXHJcbiAgICAgICAgICAgIGJvdHRvbXJpZ2h0OiBib3R0b21yaWdodFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb250YWlucyhwKSB7XHJcbiAgICAgICAgdmFyIHBvaW50cyA9IHRoaXMub3B0aW9ucy5wb2ludHNcclxuICAgICAgICB2YXIgaSwgbCA9IHBvaW50cy5sZW5ndGgsXHJcbiAgICAgICAgICAgIGogPSBsIC0gMVxyXG4gICAgICAgIHZhciB4ID0gcC54LFxyXG4gICAgICAgICAgICB5ID0gcC55XHJcbiAgICAgICAgdmFyIG9kZE5vZGVzID0gZmFsc2VcclxuXHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoKHBvaW50c1tpXS55IDwgeSAmJiBwb2ludHNbal0ueSA+PSB5IHx8XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzW2pdLnkgPCB5ICYmIHBvaW50c1tpXS55ID49IHkpICYmXHJcbiAgICAgICAgICAgICAgICAocG9pbnRzW2ldLnggPD0geCB8fCBwb2ludHNbal0ueCA8PSB4KSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvaW50c1tpXS54ICsgKHkgLSBwb2ludHNbaV0ueSkgLyAocG9pbnRzW2pdLnkgLSBwb2ludHNbaV0ueSkgKiAocG9pbnRzW2pdLnggLSBwb2ludHNbaV0ueCkgPCB4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2RkTm9kZXMgPSAhb2RkTm9kZXNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBqID0gaVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2RkTm9kZXNcclxuICAgIH1cclxuXHJcbiAgICBwYXRoKGN0eCkge1xyXG4gICAgICAgIHBhdGgoY3R4LCB0aGlzLm9wdGlvbnMucG9pbnRzKVxyXG4gICAgfVxyXG5cclxuICAgIGNhc3QoY3R4LCBvcmlnaW4sIGJvdW5kcykge1xyXG4gICAgICAgIC8vIFRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIHByb2plY3Rpb24gaXMgYSBiaXQgaGFja3kuLi4gZG8geW91IGhhdmUgYSBwcm9wZXIgc29sdXRpb24/XHJcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gKChib3VuZHMuYm90dG9tcmlnaHQueCAtIGJvdW5kcy50b3BsZWZ0LngpICsgKGJvdW5kcy5ib3R0b21yaWdodC55IC0gYm91bmRzLnRvcGxlZnQueSkpIC8gMlxyXG4gICAgICAgIHRoaXMuX2ZvckVhY2hWaXNpYmxlRWRnZXMob3JpZ2luLCBib3VuZHMsIGZ1bmN0aW9uIChhLCBiLCBvcmlnaW5Ub0EsIG9yaWdpblRvQiwgYVRvQikge1xyXG4gICAgICAgICAgICB2YXIgbSAvLyBtIGlzIHRoZSBwcm9qZWN0ZWQgcG9pbnQgb2Ygb3JpZ2luIHRvIFthLCBiXVxyXG4gICAgICAgICAgICB2YXIgdCA9IG9yaWdpblRvQS5pbnYoKS5kb3QoYVRvQikgLyBhVG9CLmxlbmd0aDIoKVxyXG4gICAgICAgICAgICBpZiAodCA8IDApXHJcbiAgICAgICAgICAgICAgICBtID0gYVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0ID4gMSlcclxuICAgICAgICAgICAgICAgIG0gPSBiXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG0gPSBhLmFkZChhVG9CLm11bCh0KSlcclxuICAgICAgICAgICAgdmFyIG9yaWdpblRvTSA9IG0uc3ViKG9yaWdpbilcclxuICAgICAgICAgICAgLy8gbm9ybWFsaXplIHRvIGRpc3RhbmNlXHJcbiAgICAgICAgICAgIG9yaWdpblRvTSA9IG9yaWdpblRvTS5ub3JtYWxpemUoKS5tdWwoZGlzdGFuY2UpXHJcbiAgICAgICAgICAgIG9yaWdpblRvQSA9IG9yaWdpblRvQS5ub3JtYWxpemUoKS5tdWwoZGlzdGFuY2UpXHJcbiAgICAgICAgICAgIG9yaWdpblRvQiA9IG9yaWdpblRvQi5ub3JtYWxpemUoKS5tdWwoZGlzdGFuY2UpXHJcbiAgICAgICAgICAgIC8vIHByb2plY3QgcG9pbnRzXHJcbiAgICAgICAgICAgIHZhciBvYW0gPSBhLmFkZChvcmlnaW5Ub00pXHJcbiAgICAgICAgICAgIHZhciBvYm0gPSBiLmFkZChvcmlnaW5Ub00pXHJcbiAgICAgICAgICAgIHZhciBhcCA9IGEuYWRkKG9yaWdpblRvQSlcclxuICAgICAgICAgICAgdmFyIGJwID0gYi5hZGQob3JpZ2luVG9CKVxyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKClcclxuICAgICAgICAgICAgcGF0aChjdHgsIFthLCBiLCBicCwgb2JtLCBvYW0sIGFwXSlcclxuICAgICAgICAgICAgY3R4LmZpbGwoKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgX2ZvckVhY2hWaXNpYmxlRWRnZXMob3JpZ2luLCBib3VuZHMsIGYpIHtcclxuICAgICAgICB2YXIgYSA9IHRoaXMub3B0aW9ucy5wb2ludHNbdGhpcy5vcHRpb25zLnBvaW50cy5sZW5ndGggLSAxXSxcclxuICAgICAgICAgICAgYlxyXG4gICAgICAgIGZvciAodmFyIHAgPSAwLCBsID0gdGhpcy5vcHRpb25zLnBvaW50cy5sZW5ndGg7IHAgPCBsOyArK3AsIGEgPSBiKSB7XHJcbiAgICAgICAgICAgIGIgPSB0aGlzLm9wdGlvbnMucG9pbnRzW3BdXHJcbiAgICAgICAgICAgIGlmIChhLmluQm91bmQoYm91bmRzLnRvcGxlZnQsIGJvdW5kcy5ib3R0b21yaWdodCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmlnaW5Ub0EgPSBhLnN1YihvcmlnaW4pXHJcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luVG9CID0gYi5zdWIob3JpZ2luKVxyXG4gICAgICAgICAgICAgICAgdmFyIGFUb0IgPSBiLnN1YihhKVxyXG4gICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBWZWMyKGFUb0IueSwgLWFUb0IueClcclxuICAgICAgICAgICAgICAgIGlmIChub3JtYWwuZG90KG9yaWdpblRvQSkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZihhLCBiLCBvcmlnaW5Ub0EsIG9yaWdpblRvQiwgYVRvQilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9seWdvbk9iamVjdCIsImltcG9ydCBWZWMyIGZyb20gJy4vVmVjMi5qcydcclxuaW1wb3J0IFBvbHlnb25PYmplY3QgZnJvbSAnLi9Qb2x5Z29uT2JqZWN0LmpzJ1xyXG5cclxuY2xhc3MgUmVjdGFuZ2xlT2JqZWN0IGV4dGVuZHMgUG9seWdvbk9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgc3VwZXIob3B0aW9ucylcclxuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgdG9wbGVmdDogbmV3IFZlYzIoKSxcclxuICAgICAgICAgICAgYm90dG9tcmlnaHQ6IG5ldyBWZWMyKClcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgdGhpcy5vcHRpb25zKVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgICAgIHRoaXMuc3luY0Zyb21Ub3BsZWZ0Qm90dG9tcmlnaHQoKVxyXG4gICAgfVxyXG4gICAgc3luY0Zyb21Ub3BsZWZ0Qm90dG9tcmlnaHQoKSB7XHJcbiAgICAgICAgdmFyIGEgPSB0aGlzLm9wdGlvbnMudG9wbGVmdFxyXG4gICAgICAgIHZhciBiID0gbmV3IFZlYzIodGhpcy5vcHRpb25zLmJvdHRvbXJpZ2h0LngsIHRoaXMub3B0aW9ucy50b3BsZWZ0LnkpXHJcbiAgICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuYm90dG9tcmlnaHRcclxuICAgICAgICB2YXIgZCA9IG5ldyBWZWMyKHRoaXMub3B0aW9ucy50b3BsZWZ0LngsIHRoaXMub3B0aW9ucy5ib3R0b21yaWdodC55KVxyXG4gICAgICAgIHRoaXMub3B0aW9ucy5wb2ludHMgPSBbYSwgYiwgYywgZF1cclxuICAgIH1cclxuICAgIGZpbGwoY3R4KSB7XHJcbiAgICAgICAgdmFyIHggPSB0aGlzLm9wdGlvbnMucG9pbnRzWzBdLngsIHkgPSB0aGlzLm9wdGlvbnMucG9pbnRzWzBdLnlcclxuICAgICAgICBjdHgucmVjdCh4LCB5LCB0aGlzLm9wdGlvbnMucG9pbnRzWzJdLnggLSB4LCB0aGlzLm9wdGlvbnMucG9pbnRzWzJdLnkgLSB5KVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSZWN0YW5nbGVPYmplY3QiLCJpbXBvcnQgUG9seWdvbk9iamVjdCBmcm9tICcuL1BvbHlnb25PYmplY3QuanMnXHJcbmltcG9ydCBWZWMyIGZyb20gJy4vVmVjMi5qcydcclxuXHJcbmNsYXNzIExpbmVPYmplY3QgZXh0ZW5kcyBQb2x5Z29uT2JqZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBzdXBlcihvcHRpb25zKVxyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICBhOiBuZXcgVmVjMigpLFxyXG4gICAgICAgICAgICBiOiBuZXcgVmVjMigpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oZGVmYXVsdHMsIHRoaXMub3B0aW9ucylcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnN5bmNGcm9tQUIoKVxyXG4gICAgfVxyXG5cclxuICAgIHN5bmNGcm9tQWIoKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLnBvaW50cyA9IFt0aGlzLm9wdGlvbnMuYSwgdGhpcy5vcHRpb25zLmJdXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExpbmVPYmplY3QiXSwibmFtZXMiOlsiVmVjMiIsIngiLCJ5IiwidGhpcyIsInYiLCJuIiwibXVsIiwiZHgiLCJkeSIsImxlbmd0aCIsIk1hdGgiLCJzcXJ0IiwibGVuZ3RoMiIsInRvcExlZnQiLCJib3R0b21SaWdodCIsIl8yUEkiLCJQSSIsInBhdGgiLCJjdHgiLCJwb2ludHMiLCJkb250Sm9pbkxhc3QiLCJwIiwibW92ZVRvIiwiaSIsImwiLCJsaW5lVG8iLCJjcmVhdGVDYW52YXNBbmQyZENvbnRleHQiLCJpZCIsInciLCJoIiwiaWlkIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNyZWF0ZUVsZW1lbnQiLCJ3aWR0aCIsImhlaWdodCIsInN0eWxlIiwiZGlzcGxheSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImdldENvbnRleHQiLCJjbGVhclJlY3QiLCJnZXRSR0JBIiwiY29sb3IiLCJhbHBoYSIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiZCIsImdldEltYWdlRGF0YSIsImRhdGEiLCJnZXRUYW4yIiwicmFkaXVzIiwiY2VudGVyIiwieTAiLCJsZW4yIiwic29sbiIsImVwc2lsb24iLCJzb2x1dGlvbnMiLCJhIiwieDAiLCJhcmd1bWVudHMiLCJsZW4yYSIsInR0IiwiYWNvcyIsIm50IiwidHRfY29zIiwiY29zIiwidHRfc2luIiwic2luIiwibnRfY29zIiwibnRfc2luIiwicHVzaCIsImRpc3QwIiwiZGlzdDEiLCJhYnMiLCJkaXN0MiIsImRpc3QzIiwiTGlnaHQiLCJvcHRpb25zIiwiZGVmYXVsdHMiLCJPYmplY3QiLCJhc3NpZ24iLCJjIiwiX2dldFZpc2libGVNYXNrQ2FjaGUiLCJkcmF3SW1hZ2UiLCJyb3VuZCIsInBvc2l0aW9uIiwiZGlzdGFuY2UiLCJmIiwiZmxvb3IiLCJoYXNoIiwidmlzbWFza2hhc2giLCJfdmlzbWFza2NhY2hlIiwiZyIsImNyZWF0ZVJhZGlhbEdyYWRpZW50IiwiYWRkQ29sb3JTdG9wIiwiZGlmZnVzZSIsInRvU3RyaW5nIiwiTGlnaHRpbmciLCJfY2FjaGUiLCJfY2FzdGNhY2hlIiwiY3R4b3V0cHV0IiwibGlnaHQiLCJzYW1wbGVzIiwiYm91bmRzIiwib2JqZWN0cyIsImZvckVhY2hTYW1wbGUiLCJvIiwiY29udGFpbnMiLCJ0b3BsZWZ0IiwiYm90dG9tcmlnaHQiLCJmb3JFYWNoIiwib2JqZWN0IiwiY2FzdCIsInVuZGVmaW5lZCIsImJlZ2luUGF0aCIsImZpbGwiLCJjcmVhdGVDYWNoZSIsInNhdmUiLCJyZW5kZXIiLCJnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24iLCJyZXN0b3JlIiwiTGFtcCIsIl90aGlzIiwiYW5nbGUiLCJyb3VnaG5lc3MiLCJvcmllbnRhdGlvbkNlbnRlciIsImhhc2hjb2RlIiwiX2dldEhhc2hDYWNoZSIsIl9jYWNoZUhhc2hjb2RlIiwiX2djYWNoZSIsIkQiLCJjYWNoZSIsIm1pbiIsIl9nZXRHcmFkaWVudENhY2hlIiwiT3BhcXVlT2JqZWN0IiwidW5pcXVlSWQiLCJEaXNjT2JqZWN0Iiwib3JpZ2luIiwibSIsIm9yaWdpblRvTSIsInN1YiIsInRhbmdlbnRMaW5lcyIsIm9yaWdpblRvQSIsIm9yaWdpblRvQiIsImFkZCIsImIiLCJub3JtYWxpemUiLCJvYW0iLCJvYm0iLCJhcCIsImJwIiwic3RhcnQiLCJhdGFuMiIsImFyYyIsInBvaW50IiwiUG9seWdvbk9iamVjdCIsImNvcHkiLCJqIiwib2RkTm9kZXMiLCJfZm9yRWFjaFZpc2libGVFZGdlcyIsImFUb0IiLCJ0IiwiaW52IiwiZG90IiwiaW5Cb3VuZCIsIlJlY3RhbmdsZU9iamVjdCIsInN5bmNGcm9tVG9wbGVmdEJvdHRvbXJpZ2h0IiwicmVjdCIsIkxpbmVPYmplY3QiLCJzeW5jRnJvbUFCIl0sIm1hcHBpbmdzIjoia3NDQUFNQSx3QkFDVUMsRUFBR0Msa0JBQ05ELEVBQUlBLEdBQUssT0FDVEMsRUFBSUEsR0FBSyxrREFJUCxJQUFJRixFQUFLRyxLQUFLRixFQUFHRSxLQUFLRCwrQkFHN0JFLFVBQ09BLEVBQUVILEVBQUlFLEtBQUtGLEVBQUlHLEVBQUVGLEVBQUlDLEtBQUtELDhCQUdqQ0UsVUFDTyxJQUFJSixFQUFLRyxLQUFLRixFQUFJRyxFQUFFSCxFQUFHRSxLQUFLRCxFQUFJRSxFQUFFRiwrQkFHekNFLFVBQ08sSUFBSUosRUFBS0csS0FBS0YsRUFBSUcsRUFBRUgsRUFBR0UsS0FBS0QsRUFBSUUsRUFBRUYsK0JBR3pDRyxVQUNPLElBQUlMLEVBQUtHLEtBQUtGLEVBQUlJLEVBQUdGLEtBQUtELEVBQUlHLHdDQUk5QkYsS0FBS0csS0FBSyxpQ0FHZkYsT0FDRUcsRUFBS0osS0FBS0YsRUFBSUcsRUFBRUgsRUFDaEJPLEVBQUtMLEtBQUtELEVBQUlFLEVBQUVGLFNBQ2JLLEVBQUtBLEVBQUtDLEVBQUtBLDBDQUlsQkMsRUFBU0MsS0FBS0MsS0FBS1IsS0FBS1Msa0JBQ3JCLElBQUlaLEVBQUtHLEtBQUtGLEVBQUlRLEVBQVFOLEtBQUtELEVBQUlPLDRDQUluQ04sS0FBS0YsRUFBSUUsS0FBS0YsRUFBSUUsS0FBS0QsRUFBSUMsS0FBS0QsNENBSWhDQyxLQUFLRixFQUFJLElBQU1FLEtBQUtELGtDQUd2QlcsRUFBU0MsVUFDTEQsRUFBUVosRUFBSUUsS0FBS0YsR0FBS0UsS0FBS0YsRUFBSWEsRUFBWWIsR0FDL0NZLEVBQVFYLEVBQUlDLEtBQUtELEdBQUtDLEtBQUtELEVBQUlZ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
